
                                
                              
                        
                                <main class="main-content p-0">
                                    
                                  <form  [formGroup]="CreatePurchaseInvoice"  onkeydown="return event.key != 'Enter';">
                                         
                            
                                       <div class="container-fluid d-print-none p-0">
                                         
                                      <!-- begin::page header -->

                                      <div class="page-header">
                                          <div class="row">
                                              <div class="col-md-2">
                                                  <h3>Purchase Invoice</h3>
                                                  <nav aria-label="breadcrumb">
                                                      <ol class="breadcrumb">
                                                          <li class="breadcrumb-item">Purchases</li>
                                                          <!-- <li class="breadcrumb-item">Purchase Invoice</li> -->
                                                          <li class="breadcrumb-item active" aria-current="page">Purchase Invoice</li>
                                                      </ol>
                                                  </nav>
                                              </div>
                                              <div class="col-md-4 text-right" style="padding: 0px;">
                                                  <div class="arrow-pointer"><strong  style="padding: 4px; margin: 5px; display: inherit;margin-left: 10px;font-size: 12px !important;">Purchase Indent</strong></div>
                                                  <div class="arrow-pointer5"><strong style="padding: 4px; margin: 5px; display: inherit;margin-left: 25px;font-size: 12px !important;">RFQ</strong></div>
                                                  <div class="arrow-pointer1"><strong style="padding: 4px; margin: 5px; display: inherit;margin-left: 25px;font-size: 12px !important;">Quotation</strong></div>
                                                  <div class="arrow-pointer2"><strong style="padding: 4px; margin: 5px; display: inherit;margin-left: 25px;font-size: 12px !important;">Purchase Order</strong></div>
                                                  <div class="arrow-pointer4"><strong style="padding: 4px; margin: 5px; display: inherit;margin-left: 25px;font-size: 12px !important;">MRN</strong></div>
                                                  <div class="arrow-pointer3"><strong style="padding: 4px; margin: 5px; display: inherit;margin-left: 25px;font-size: 12px !important;">Purchase Invoice</strong></div>
                                              </div>
                                              <div class="col-md-6" style="padding-right: 0px;">
                                                  <div class="row">
                                                      <div class="col-md-12 text-right m-top-bot-auto" style="padding-right: 0px;">
                                                          <button class="btn btn-warning" (click)="Search()" style="margin-right: 10px;background: #00aad7 !important; border: 1px solid #00aad7 !important;color: white;"><i class="fa fa-bars" style="margin-top: -2px;margin-right: 9px;"></i> Overview</button>
                                                          <button class="btn btn-warning" (click)="OnAdd()" style="margin-right: 10px;background: #00aad7 !important; border: 1px solid #00aad7 !important;color: white;"><i class="fa fa-check" style="margin-top: -2px;margin-right: 9px;"></i> New</button>
                                                          <button class="btn btn-warning" (click)="OnSave()" style="margin-right: 10px;background: #00aad7 !important; border: 1px solid #00aad7 !important;color: white;"><i class="fa fa-check" style="margin-top: -2px;margin-right: 9px;"></i> Save</button>
                                                          <button class="btn btn-warning" (click)="OnPrint()"  data-toggle="modal"   data-target="#SalesInvoicePrintId"  data-backdrop="static" style="margin-right: 10px;background: #e98102 !important; border: 1px solid #e78002 !important;color: white;"><i class="fa fa-print" style="margin-top: -2px;margin-right: 9px;"></i> Print</button>
                                                          <div class="dropdown">
                                                              <div class="btn btn-gray " data-toggle="dropdown" aria-expanded="false" style="margin-right: 10px;background: #0dbd6c !important; border: 1px solid #0dbd6c !important;color: white; ">
                                                                  <i  class="fa fa-share-square-o" style="margin-top: -2px;margin-right: 9px;"></i> Export</div>
                                                              <div  aria-labelledby="dropdownMenuButton" class="dropdown-menu dropdown-menu-right" style="position: absolute; will-change: transform; width: 300px; margin: 9px -1px -1px; padding-top: 0px; border: none; top: 0px; left: -104px; transform: translate3d(-279px, 26px, 0px);">
                                                                  <div class="row" style="background: #ececec;">
                                                                      <div class="col-md-12">
                                                                          <div class="card-header" style="background: #0dbd6c !important; color: white; font-size: 15px;padding: 5px 5px 5px 14px;">
                                                                              Select Format
                                                                          </div>
                                                                      </div>
                                                                      <div class="col-md-4 m-top-bot-auto">
                                                                          <p class="p-0" style="margin-left: 20px !important; margin-bottom: 4px;font-weight: 400; font-size: 15px;">Format  </p>
                                                                      </div>
                                                                      <div class="col-md-8 mb-3">
                                                                          <div class="form-check form-check-inline" style="margin-top: 10px;">
                                                                              <input class="form-check-input" type="radio" name="inlineRadioOptions" id="inlineRadio1" value="option1">
                                                                              <label class="form-check-label" for="inlineRadio1"><img src="https://upload.wikimedia.org/wikipedia/commons/thumb/8/87/PDF_file_icon.svg/1200px-PDF_file_icon.svg.png" style="width: 25px;"></label>
                                                                          </div>
                                                                          <div class="form-check form-check-inline" style="margin-top: 10px;">
                                                                              <input class="form-check-input" type="radio" name="inlineRadioOptions" id="inlineRadio1" value="option1">
                                                                              <label class="form-check-label" for="inlineRadio1"><img src="https://cdn.iconscout.com/icon/free/png-512/microsoft-excel-4-722715.png" style="width: 25px;"></label>
                                                                          </div>
                                                                      </div>
                                                                      
                                                                      <div class="col-md-12 text-right mb-3">
                                                                          <button class="btn btn-success" style="margin-right: 15px;">Download</button>
                                                                      </div>
                                                                     
                              
                                                                  </div>
                                                              </div>
                                                          </div>
                                                          <div class="dropdown">
                                                              <div class="btn btn-gray " data-toggle="dropdown" aria-expanded="false" style="margin-right: 10px;background: #93bd00; border-color: #93bd00;color: white; ">
                                                                  <i  class="fa fa-whatsapp" style="margin-top: -2px;margin-right: 9px;"></i> Whatsapp</div>
                                                              <div  aria-labelledby="dropdownMenuButton" class="dropdown-menu dropdown-menu-right" style="position: absolute; will-change: transform; width: 300px; margin: 9px -1px -1px; padding-top: 0px; border: none; top: 0px; left: -104px; transform: translate3d(-279px, 26px, 0px);">
                                                                  <div class="row" style="background: #ececec;">
                                                                      <div class="col-md-12">
                                                                          <div class="card-header" style="background: #93bd00 !important; color: white; font-size: 15px;padding: 5px 5px 5px 14px;">
                                                                              Select Numbers To Whatsapp
                                                                          </div>
                                                                      </div>
                                                                      <div class="col-md-12">
                                                                          <div class="form-check">
                                                                              <p class="p-0" style="margin-left: 20px !important; margin-top: 10px;"><input class="form-check-input" type="checkbox" value="" id="defaultCheck1" > Asif - 9849150150 </p>
                                                                          </div>
                              
                                                                          <div class="form-check">
                                                                              <p class="p-0" style="margin-left: 20px !important; margin-top: 10px;"> <input class="form-check-input" type="checkbox" value="" id="defaultCheck1" > baba - 9849140140 </p>
                                                                          </div>
                                                                      </div>
                                                                      <div class="col-md-12 text-right mb-3">
                                                                          <button class="btn btn-danger" style="margin-right: 8px;" >Dscard</button>
                                                                          <button class="btn btn-warning" style="margin-right: 15px;">Send</button>
                                                                      </div>
                                                                  </div>
                                                              </div>
                                                          </div>
                                                          <div class="dropdown">
                                                              <div class="btn btn-gray " data-toggle="dropdown" aria-expanded="false" style="margin-right: 10px;background: #525050; border-color: #525050;color: white; ">
                                                                  <i  class="fa fa-envelope" style="margin-top: -2px;margin-right: 9px;"></i> Mail</div>
                                                              <div  aria-labelledby="dropdownMenuButton" class="dropdown-menu dropdown-menu-right" style="position: absolute; will-change: transform; width: 470px; margin: 9px -1px -1px; padding-top: 0px; border: none; top: 0px; left: -104px; transform: translate3d(-279px, 26px, 0px);">
                                                                  <div class="row" style="background: #ececec;">
                                                                      <div class="col-md-12">
                                                                          <div class="card-header" style="background: #525050 !important; color: white; font-size: 15px;padding: 5px 5px 5px 14px;">
                                                                              Select Document Format & Email
                                                                          </div>
                                                                      </div>
                                                                      <div class="col-md-4 m-top-bot-auto">
                                                                          <p class="p-0" style="margin-left: 20px !important; margin-top: 18px; margin-bottom: 4px;font-weight: 400; font-size: 15px;">Format  </p>
                                                                      </div>
                                                                      <div class="col-md-8">
                                                                          <div class="form-check form-check-inline" style="margin-top: 10px;">
                                                                              <input class="form-check-input" type="radio" name="inlineRadioOptions" id="inlineRadio1" value="option1">
                                                                              <label class="form-check-label" for="inlineRadio1"><img src="https://upload.wikimedia.org/wikipedia/commons/thumb/8/87/PDF_file_icon.svg/1200px-PDF_file_icon.svg.png" style="width: 25px;"></label>
                                                                          </div>
                                                                          <div class="form-check form-check-inline" style="margin-top: 10px;">
                                                                              <input class="form-check-input" type="radio" name="inlineRadioOptions" id="inlineRadio1" value="option1">
                                                                              <label class="form-check-label" for="inlineRadio1"><img src="https://cdn.iconscout.com/icon/free/png-512/microsoft-excel-4-722715.png" style="width: 25px;"></label>
                                                                          </div>
                                                                      </div>
                                                                      <div class="col-md-4" >
                                                                          <p class="p-0" style="margin-left: 20px !important; margin-top: 10px;font-weight: 400; font-size: 15px;" >Select Email  </p>
                                                                      </div>
                                                                      <div class="col-md-8" >
                                                                          <select class="form-control" style="width: 95%;background:none">
                                                                              <option>mechknow@gmail.com</option>
                                                                              <option>mechknow@gmail.com</option>
                                                                              <option>mechknow@gmail.com</option>
                                                                          </select>
                              
                                                                          <!-- <select class="js-example-basic-single" multiple="">
                                                                              <option >
                                                                              <optgroup label="Cities">
                                                                                  <option value="Wonosari" >Wonosari</option>
                                                                                  <option value="Antipolo" >Antipolo</option>
                                                                                  <option value="Lesuhe" >Lesuhe</option>
                                                                                  <option selected="" value="Sunzhuang" >Sunzhuang</option>
                                                                                  <option value="Hongchuan" >Hongchuan
                                                                              </optgroup>
                                                                              <optgroup label="Countries">
                                                                                  <option value="France" >France</option>
                                                                                  <option selected="" value="Brazil" >Brazil</option>
                                                                                  <option selected="" value="Yemen" >Yemen</option>
                                                                                  <option selected="" value="United States" >United States</option>
                                                                                  <option value="China" >China</option>
                                                                                  <option value="Argentina" >Argentina</option>
                                                                                  <option value="Bulgaria" >Bulgaria</option>
                                                                              </optgroup>
                                                                          </select> -->
                                                                      </div>
                              
                                                                      <div class="col-md-4" >
                                                                          <p class="p-0" style="margin-left: 20px !important; margin-top: 10px;">New Email  </p>
                                                                      </div>
                                                                      <div class="col-md-8" >
                                                                          <input type="text" class="form-control" placeholder="Enter email" style="width: 95%;background:none">
                                                                      </div>
                                                                      <div class="col-md-12 text-right">
                                                                          <button class="btn btn-danger" style="margin-right: 8px;">Dscard</button>
                                                                          <button class="btn btn-warning" style="margin-right: 15px;" (click)="sendemail()">Send</button>
                                                                      </div>
                                                                      <div class="col-md-12 mb-3" >
                                                                          <div class="form-check form-check-inline" style="margin-left: 20px !important; margin-top: 10px;">
                                                                              <input class="form-check-input" type="radio" name="inlineRadioOptions" id="inlineRadio1" value="option1" >
                                                                              <label class="form-check-label" for="inlineCheckbox1" style="font-family: 'Poppins'; font-weight: 400; color: #0c0c0c">Enter New Email.</label>
                                                                          </div>
                                                                      
                                                                          <div class="form-check form-check-inline" style="margin-left: 20px !important; margin-top: 10px;" >
                                                                              <input class="form-check-input" type="radio" name="inlineRadioOptions" id="inlineRadio1" value="option2" >
                                                                              <label class="form-check-label" for="inlineCheckbox1" style="font-family: 'Poppins'; font-weight: 400; color: #0c0c0c">Existing Email.</label>
                                                                          </div>
                                                                      </div>
                              
                                                                  </div>
                                                              </div>
                                                          </div>
                                                          <button class="btn btn-danger" (click)="OnDelete()" style="margin-right: 34px;color: white;"><i class="fa fa-trash" style="margin-top: -2px;margin-right: 9px;"></i> Delete</button>
                                                      </div>
                                                     
                                                  </div>
                                              </div>
                                          </div>
                                      </div>
                                      <!-- end::page header -->
                              
                                      <div class="row row-sm">
                                          
                                            

                                          <div class="col-md-10">
                                              <div class="card">
                                                
                                                  <div class="card-body">
                                                      <div class="form-group" style="margin-bottom: 0px;">
                                                          <div class="container">
                                                             <div class="row">
                                                              <div class="col-md-9">
                                                                  <!-- <ul class="nav nav-tabs" id="InvoiceTab" role="tablist">
                                                                      <li class="nav-item">
                                                                          <a class="nav-link active" id="Overview-tab" data-toggle="tab" href="#Overview" role="tab" aria-controls="Overview" aria-selected="true">Overview</a>
                                                                      </li>
                                                                      <li class="nav-item">
                                                                          <a class="nav-link" id="Charges-tab" data-toggle="tab" href="#PaymentTerms" role="tab" aria-controls="Payment" aria-selected="false">Payment Terms</a>
                                                                      </li>
                                                                      <li class="nav-item">
                                                                          <a class="nav-link" id="Charges-tab" data-toggle="tab" href="#Charges" role="tab" aria-controls="Charges" aria-selected="false">Charges</a>
                                                                      </li>
                                                                      <li class="nav-item ">
                                                                          <a class="nav-link nav-text" id="Accounts-tab" data-toggle="tab" href="#Accounts" role="tab" aria-controls="Accounts" aria-selected="false" (click)="tabClick('')">Accounts</a>
                                                                      </li>
      
                                                                      <li class="nav-item">
                                                                          <a class="nav-link" id="Charges-tab" data-toggle="tab" href="#Charges" role="tab" aria-controls="Charges" aria-selected="false">Notes</a>
                                                                      </li>
                                                                  </ul> -->
                                                              </div>  
                                                              
                                                             </div> 
                                                          </div>

                                                          
                                                          <div class="tab-content" id="VendorTabContent">
                                                              <div class="tab-pane fade active show" id="Overview" role="tabpanel" aria-labelledby="Overview-tab">
                                                                  <div class="row row-sm" style="margin-top: 12px;">
                                                                      <div class="col-md-12">
                                                                       
                                                                                  <div class="row">
                                                                                  <!-- <div class="col-md-6">
                                                                                  <label for="Vendor" id="PartyId">Vendor</label>
                                                                                  
                                                                                  <DropdownVendor      (VendorValueChange) ="VendorValueChange($event)"                                                                                     
                                                                                  [VendorId]="DisplayVendorId" [Vendorname]="DispalyVendorName" >
                                                                              </DropdownVendor>
                                                                                
                                                                                  <div class="input-group-prepend" data-toggle="modal"   data-target="#ModelPartyId"  data-backdrop="static" data-keyboard="false" >
                                                                                      <span class="input-group-text" style="cursor: pointer;">
                                                                                          <i class="ti-plus"></i>
                                                                                      </span>
                                                                                        
                                                                              </div>
                                                                        
                                                                                  <div *ngIf="submitted && f.PartyId.errors" style="font-size: 80%;">
                                                                                      <div *ngIf="f.PartyId.errors.required " style="color:red " >Vendor Required</div>
                                                                                      <div *ngIf="f.PartyId.errors.min" style="color:red " >Vendor Required</div>
                                                                                  </div>
                                                                              </div> -->

                                                                              <!-- <div class="col-md-6">
                                                                                  <label for="Contact">Purchase Type</label>
                                                                                  <select class="mb-3 form-control">
                                                                                      <option value="Local">Local</option>
                                                                                      <option value="Import">Import</option>
                                                                                  </select>
                                                                              </div>

                                                                              <div class="col-md-6">
                                                                               
                                                                              </div> -->

                                                                              <div class="col-md-6">
                                                                                  <div class="row">
                                                                                  <div class="col-md-12">
                                                                                      <div class="row">
                                                                                          
                                                                                          <div class="col-md-12">
                                                                                              <div class="row">
                                                                                                  <div class="col-md-2 m-top-bot-auto"><label for="Vendor" id="PartyId" class="m-0">Vendor</label></div>
                                                                                                  <div class="col-md-8 mb-3" style="padding-right: 0px;">
                                                                                                      <div  class="input-group clockpicker-minutes-demo">
                                                                                                          <dropdown-number-sequence formControlName='SequenceNumberId' hidden  (NumberSequenceValueChange) ="NumberSequenceValueChange($event)"    [SequenceNumberId]="DisplaySequenceNumberId" [FormName]="DispalyFormName">
                                                                                                          </dropdown-number-sequence>
                                                                                                          <DropdownVendor   (VendorValueChange) ="VendorValueChange($event)"  
                                                                                                          [VendorId]="DisplayVendorId" [Vendorname]="DispalyVendorName" style="width: 100%;">
                                                                                                      </DropdownVendor>
                                                                                                      
                                                                                                      </div>
                                                                                                          <div *ngIf="submitted && f.PartyId.errors" style="font-size: 80%;">
                                                                                                              <div *ngIf="f.PartyId.errors.required " style="color:red " >Vendor Required</div>
                                                                                                              <div *ngIf="f.PartyId.errors.min" style="color:red " >Vendor Required</div>
                                                                                                          </div>
                                                                                                  </div>
              
                                                                                                  <div class="col-md-1 p-0">
                                                                                                      <div  class="dropdown">
                                                                                                          <a  aria-expanded="false" class="btn btn-gray btn-floating btn-icon btn-sm waves-effect waves-button waves-light" data-toggle="dropdown" href="#" style="padding: 11px; height: 39px; width: 38px; margin-left: -2px; border-radius: 0px 5px 5px 0px;">
                                                                                                              <i  aria-hidden="true" class="fa fa-ellipsis-v" style="color: white !important;font-size: 19px;"></i></a>
                                                                                                          <div class="dropdown-menu dropdown-menu-right" style="position: absolute; will-change: transform; top: 0px; left: 0px; transform: translate3d(30px, 24px, 0px);" x-placement="bottom-end">
                                                                                                          <button  class="dropdown-item font-size-15" data-target="#newRefill" data-toggle="modal" type="button" autocomplete="off">Vendor Central<i  aria-hidden="true" class="fa fa-plus" style="float: right;"></i></button>
                                                                                                        
                                                                                                          <button  class="dropdown-item font-size-15" (click)="OpenAccountLedger()" data-toggle="modal" type="button" autocomplete="off">Account Ledger<i  aria-hidden="true" class="fa fa-file" style="float: right;"></i></button>
                                                                                                          <button  class="dropdown-item font-size-15" (click)="VendorMaster()" data-toggle="modal" type="button" autocomplete="off">Vendor Master<i  aria-hidden="true" class="fa fa-file" style="float: right;"></i></button>
                                                                                                       
                                                                                                      
                                                                                                      </div>
                                                                                                      </div>
                                                                                                  </div>
                                                                                                  <div class="col-md-1 p-0 text-right">
                                                                                                      <div  >
                                                                                                          <a  aria-expanded="false" class="btn btn-warning btn-floating btn-icon btn-sm waves-effect waves-button waves-light" data-toggle="modal"  *ngIf="f.PartyId.value<=0" data-target="#ModelPartyId" href="#" style="border-radius: 0px;padding: 11px;height: 36px; width: 36px;">
                                                                                                              <i  aria-hidden="true" class="fa fa-plus" style="color: #000 !important; font-size: 19px; vertical-align: baseline; margin-top: -3px;"></i></a>
                                                                                                      </div>
                                                                                                  </div>

                                                                                                  <div class="col-md-2 m-top-bot-auto">
                                                                                                      <label class="m-0 p-0">Reference</label>
                                                                                                  </div>
                                                                                                  <div class="col-md-3 ">
                                                                                                      <input type="text" class="form-control mb-3" (change)="ReferenceChange($event.target)" [ngStyle]="{'background-color':getColor1(Tracking1)}" formControlName="VendorreferenceType"  placeholder="Reference Type">
                                                                                                  </div>
                                                                                                  <div  class="col-md-1 mb-3" style="margin-top: auto;">
                                                                                                      <i  class="fa fa-external-link" data-target="#ReferenceDoc" data-toggle="modal" style="font-size: 20px; color: #8c8c8c; vertical-align: middle; cursor: pointer; margin-bottom: -4px;"></i>
                                                                                                  </div>
                                                                                                  <div class="col-md-3 ">
                                                                                                      <input type="text" class="form-control" (change)="ReferencenumChange($event.target)" [ngStyle]="{'background-color':getColor2(Tracking2)}" formControlName="Vendorreference"  placeholder="Reference Number">
                                                                                                  </div>
                                                                                                  
                                                                                                  <div class="col-md-3 pr-0">
                                                                                                      
                                                                                                      <input type="date" class="form-control" 
                                                                                                       (change)="ReferenceDateChange($event.target)" [ngStyle]="{'background-color':getColor3(Tracking3)}" formControlName="vdate" placeholder="Vendor Reference">
                                                                                                  </div>
                                                                                                  <div class="col-md-2 m-top-bot-auto"><label class="m-0 p-0">Incoterms</label></div>
                                                                                                  <div class="col-md-4">
                                                                                                      <select class="form-control" (change)="IncotermsChange($event.target)" [ngStyle]="{'background-color':getColor4(Tracking4)}" formControlName="Incoterms" autocomplete="off">
                                                                                                          <option value="Ex-Works">Ex-Works</option>
                                                                                                          <option value="Free On Board">Free On Board</option>
                                                                                                          <option value="Cost and Frieght">Cost and Frieght</option>
                                                                                                          <option value="Cost, Insurance and Frieght">Cost, Insurance and Frieght</option>
                                                                                                          <option value="Carriage Paid To">Carriage Paid To</option>
                                                                                                      </select>
                                                                                                  </div>
                                                                                                  <div class="col-md-1 m-top-bot-auto"><label class="m-0 p-0">Currency</label></div>
                                                                                                  <div class="col-md-4 pr-0">
                                                                                                    <select id="drpCurrency" class="js-example-basic-single"  formControlName="CurrencyId"  ></select>
                                                                                                  </div>
                                                                                               
                      
                                                                                                  <div class="col-md-1 m-top-bot-auto" *ngIf="Exchange=='hide'"><label class="m-0 p-0">Rate</label></div>
                                                                                                  <div class="col-md-2 pr-0" *ngIf="Exchange=='hide'">
                                                                                                      <input type="text" class="form-control" placeholder="Currency rate">
                                                                                                  </div>

                                                                                              </div>
                                                                                          </div>
                                                                                      </div>
                                                                          </div>
                                                                          
                                                                      </div>
                                                                          </div>
                                                                              
                                                                      

                                                                      <div class="col-md-3">
                                                                          <div class="row">
                                                                              <div class="col-md-4 m-top-bot-auto"><label for="SequenceNumberId" class="m-0">Purchase Type</label></div>
                                                                              <div class="col-md-8">
                                                                                  <select id="InvoiceType"  formControlName="InvoiceType" #mySelect class="mb-3 form-control" 
                                                                                  [ngStyle]="{'background-color':getColor5(Tracking5)}" (change)="InvoiceTypeChange(mySelect.value)">
                                                                                      <option value="Invoice" selected  >Registered Business</option>
                                                                                      <option value="Warranty">Warranty Replace</option>
                                                                                      <option value="Import">Overseas</option>
                                                                                      <option value="ExcludeTax">Unregistered Business</option>
                                                                                  </select>
                                                                              </div>
                                                                              <div class="col-md-4 m-top-bot-auto"><label for="PurchaseType" class="m-0">Transac Type</label></div>
                                                                              <div class="col-md-8">
                                                                                  <select id="PurchaseType"  formControlName="PurchaseType"  (change)="PurchaseTypeChange($event.target)" class="mb-3 form-control">
                                                                                      <option >Select..</option>
                                                                                      <option value="Debit">Debit</option>
                                                                                      <option value="Cash">Cash</option>
                                                                                      </select>
                                                                                      <div *ngIf="submitted && f.PurchaseType.value==''">
                                                                                          <label style="color: red;font-size: 9px;" >Purchase Type is required</label>

                                                                                      </div>
                                                                                 
                                                                              </div>
                                                                              
                                                                                   

                                                                              <div class="col-md-4 m-top-bot-auto"><label for="Contact"  id="OrderNo" >Our Ref</label>
                                                                                 
                                                                              </div>
                                                                      <div class="col-md-8">
                                                                          <select id="drpReference" class="js-example-basic-single mb-3" name="drpReference" > </select>
                                                                          
                                                                      </div>
                                                                          </div>
                                                                      </div>

                                                                      <div class="col-md-3">
                                                                          <div class="row">
                                                                              <div class="col-md-9" style="background: #1f1a17;color: white;border-radius: 6px;margin-left: auto;margin-right: 15px;">
                                                                                  <h3  id="headerId" style="margin-top: 9px;text-align: center;">{{f.TransactionNo.value}}</h3>
                                                                              </div>  
                                                                              <div class="col-md-4 m-top-auto">
                                                                                  <label for="SequenceNumberId"><strong>Date</strong></label>
                                          
                                                                              </div>
                                                                              <div class="col-md-8 mb-3">
                                                                                  <input type="text" class="form-control"  name="single-date-picker"  id="TransactionDate"
                                                                                  placeholder="Enter Date" (change)="QuotDateChange($event)"
                                                                                 [ngClass]="{ 'is-invalid': submitted && f.TransactionDate.errors }"
                                                                                 >
                                                                                 <div *ngIf="submitted && f.TransactionDate.errors" class="invalid-feedback">
                                                                                 <div *ngIf="f.TransactionDate.errors.required" style="color:red " >Date Required</div>
                                                                              </div>
                                                                            </div>
                                                                              <div class="col-md-4 m-top-bot-auto">
                                                                                  <label for="BillRefNo" class="m-0">Select Template </label>
                                                                              </div>
                                                                              <div class="col-md-8">
                                                                                 
                                                                                  <select id="TemplateType"  formControlName="TemplateType" class="form-control" 
                                                                                  (change)="TemplateTypeChange($event.target)">
                                                                                      <option value="MRN">MATERIAL RECEIPT NOTE</option>
                                                                                      <option value="PurchaseQuotation">Purchase Quotation</option>
                                                                                      <option value="PurchaseOrder">Purchase Order</option>
                                                                                  </select>
                                                                              </div>
                                                                             
                                                                          
                                                                          </div>
                                                                      </div>
                                                                      
                                                                    
                                                                   </div>
                                                                          
                                                                  </div>
                                                                  </div>
                                                              </div>

                                                              
                                                          </div>
                                                      </div>
                                                  </div>
                                              </div>
                                              <div class="card">
                                                 
                                                  <div class="card-body">
                                                      <div class="form-group" style="margin-bottom: 0px;">
                                                          <div class="row">
                                                              <div class="col-md-5">
                                                                  <ul class="nav nav-tabs" id="ProductTab" role="tablist">
                                                                      <li class="nav-item">
                                                                          <a class="nav-link nav-text active" id="ProductDetails-tab"  data-toggle="tab" href="#ProductDetails" role="tab" aria-controls="Price" (click)="ProductDetails11()" aria-selected="false">Products</a>
                                                                      </li>
                                                                      <li class="nav-item">
                                                                          <a class="nav-link nav-text" id="Service-tab" data-toggle="tab"  href="#Service" role="tab" aria-controls="Service"  aria-selected="false"> Service</a>
                                                                      </li>

                                                                      <li class="nav-item">
                                                                          <a class="nav-link nav-text" id="Discount-tab" data-toggle="tab"  href="#Discount" *ngIf="filterBy != 'Import'" role="tab" aria-controls="Discount" (click)="DiscountPer11()" aria-selected="false"> Discount</a>
                                                                      </li>
                                                                     
                                                                      <li class="nav-item">
                                                                          <a class="nav-link nav-text" id="Income-tab" data-toggle="tab" (click)="Income()" href="#Income" role="tab" *ngIf="filterBy != 'Import'" aria-controls="Income" aria-selected="false">Tax</a>
                                                                      </li>
                                                                      <li class="nav-item">
                                                                          <a class="nav-link" id="Income-tab" data-toggle="tab" (click)="CustomDuty()" href="#Income" *ngIf="filterBy == 'Import'" role="tab" aria-controls="Income" aria-selected="false">Custom Duty</a>
                                                                      </li>
                                                                      
                                                                      <li class="nav-item ">
                                                                          <a class="nav-link nav-text" id="Accounts-tab" data-toggle="tab" href="#Accounts" role="tab"  aria-controls="Accounts" aria-selected="false" (click)="tabClick('')">Accounts</a>
                                                                      </li>
      
                                                                      <li class="nav-item">
                                                                          <a class="nav-link" id="Charges-tab" data-toggle="tab" href="#Charges" role="tab" aria-controls="Charges" aria-selected="false">Notes</a>
                                                                      </li>
      
                                                                      
                                                                      
                                                                  </ul> 
                                                              </div>
                                                              <div class="col-md-7">
                                                                  <div class="row">
                                                                      <div class="col-md-7">
                                                                          <div class="row">
                                                                              <div class="col-md-12">
                                                                                  <div class="row" *ngIf="DiscountPer1=='PageIN' && filterBy != 'Import'">
                                                                                      <div class="col-md-4 m-top-bot-auto">
                                                                                          <label for="Time" >Discount %</label>
                                                                                      </div>
                                                                                      <div class="col-md-8 mb-3 m-top-bot-auto">
                                                                                          <input class="form-control" type="number" autocomplete="off">
                                                                                      </div>
                                                                                  </div>
                                                                                  <div class="row" *ngIf="Exchange=='show'" >
                                                                                      <div class="col-md-3 m-top-bot-auto">
                                                                                          <label for="Time" >Exchange Rate</label>
                                                                                      </div>
                                                                                      <div class="col-md-3 mb-3 m-top-bot-auto">
                                                                                          <input class="form-control" type="number" id="ExchangeRate"  (change) ="ExchangeRateChange($event.target.value)" 
                                                                                          style="font-weight: 500;color: black;" formControlName="ExchangeRate" autocomplete="off">
                                                                                      </div>
                                                                                      <div class="col-md-6"> 
                                                                                          <div class="row">
                                                                                              <div class="col-md-7">
                                                                                                  <input type="text" class="form-control" style="font-weight: 500;color: black;" formControlName="Totalvalueininr" readonly >
                                                                                             </div>
                                                                                              <div class="col-md-5 m-top-bot-auto">
                                                                                                  <span *ngIf="(+f.Totalvalueininr.value)>0" style="font-weight: 500;color: black;">($ {{( (+f.Totalvalueininr.value )/(+f.ExchangeRate.value)).toFixed(2)}})</span>
                                                                                              </div>

                                                                                          </div>
                                                                                          
                                                                                      </div>
                                                                                  </div>
                                                                                 </div>
                                                                          </div>
                          
                                                                      </div>
                          
                                                                      <div class="col-md-4">
                                                                              <div  class="input-group"><input  aria-describedby="btnSearch" aria-label="Recipient's username" class="form-control" id="txtSearchMenu" placeholder="Search item" style="background: #f0f0f0;" type="text" autocomplete="off">
                                                                                  <div  class="input-group-append"><button  class="btn btn-light waves-effect waves-button waves-light" id="btnSearch" type="button" autocomplete="off"><i  class="fa fa-search" style="font-size: 14px;
                                                                                           color: #323639;"></i></button></div>
                                                                              </div>
                                                                      </div>
                                                                      <div class="col-md-1">
                                                                          <a class="actionbutton " style="width:40px;height: 40px; float: right;margin-left: 5px;"
                                                                                     
                                                                          data-toggle="modal"   data-target="#DetailsId"  data-backdrop="static" data-keyboard="false"
                                                                         
                                                                          (click)="OnAdd()"
                                                              href="javascript:void(0)" id="Details">
                                                          
                                                                  <i class="fa fa-plus "  style="
                                                                  font-size: 20px;
                                                                  margin-top: 10px;
                                                              "></i>
                                                              </a>
                                                                      </div>
                                                                  </div>
                          
                                                                  
                                                              </div>
                                                          </div>
                                                         

                                                          <div class="tab-content" id="ProductTabContent" >
                                                              <div class="tab-pane fade active show" id="ProductDetails" role="tabpanel" aria-labelledby="ProductDetails-tab">
                                                                      <div class="row row-sm" style="margin-top: 12px;">
                                                                              <div class="col-md-12">
                                                                   

                                                                          <div class ="col-md-12" *ngIf="submitted && lstInvoiceItems.length==0" style="float: left;font-size: 80%">
                                                                              <div  style="color:red ;" >Add atleast one product to save</div>
                                                                              
                                                                          </div> 
                                                                          

                                                            
                                                                       
                                                                         

                                                                          <div class="dataTables_scroll" >
                                                                              <div class="dataTables_scrollHead" style="overflow: hidden; position: relative; border: 0px; width: 100%;">
                                                                                  <div class="dataTables_scrollHeadInner" style="box-sizing: content-box; width:100%; padding-right: 17px;">
                                                                                      <table class="table table-striped table-bordered dataTable m-0" role="grid" style="margin-left: 0px;width: 100%;margin-bottom: 0px;table-layout: fixed;">
                                                                                          <thead>
                                                                                            <tr role="row">
                                                                                                <th style="width:2%;" >#</th>
                                                                                                <th style="width:9%;">Part no</th>
                                                                                                <th style="width:15%;">Description</th>
                                                                                                <th style="width:7%;">Make</th>
                                                                                                <th style="width:6%;" >UOM</th>
                                                                                                <th style="width:6%;" >Qty</th>
                                                                                                <th style="width:8%;text-align: right !important;" *ngIf="filterBy == 'Import'">*$ Price</th>
                                                                                                <th style="width:6%;text-align: right !important;" *ngIf="filterBy == 'Import'">*ASS.VAL</th>
                                                                                                <th style="width:10%;text-align: right !important;" *ngIf="filterBy == 'Invoice'">Rate</th>
                                                                                                <th style="width:7%;text-align: right !important;" *ngIf="filterBy == 'Invoice'">Gross</th>
                                                                                                <th style="width:11%;text-align: right !important;" *ngIf="filterBy == 'Invoice'">Discount</th>
                                                                                                <th style="width:6%;text-align: right !important;" *ngIf="filterBy == 'Import'">CUS.DUTY</th>
                                                                                                <th style="width:8%;text-align: right !important;" >GST</th>
                                                                                                <th style="width:6%;text-align: right !important;" *ngIf="filterBy == 'Import'">Total Tax</th>
                                                                                                <th style="width:7%;text-align: right !important;" *ngIf="filterBy == 'Import'">Landed Cost</th>
                                                                                                <th style="width:8%;text-align: right !important;" >Net</th> 
                                                                                                <th  style="width:8%;"> Refer No</th>
                                                                                                <th style="width:3%;text-align: center !important;" ></th>
                                                                                            </tr>
                                                                                          </thead>
                                                                                      </table>
                                                                                  </div>  
                                                                              </div>
                                                                              <div class="dataTables_scrollBody" style="position: relative; overflow: auto; max-height: 400px; width: 100%;display: inline !important;">
                                                                                  <table id="example2" class="table table-striped table-bordered dataTable m-0" role="grid" aria-describedby="example2_info" style="width: 100%;table-layout: fixed;">
                                                                                   
                                                                                      <tbody>
                                                                                        <tr  *ngFor="let d of lstparts; let ind = index">
                                                                                            <td style="width:2%;" *ngIf="d.Show=='true'" [ngStyle]="{'background-color':getColor10(d.Partno)}">{{ind+1}}</td>
                                                                                            <td  style="width:9%;" *ngIf="d.Show=='true'" >{{d.Partno}}</td>
                                                                                            <td  style="width:15%;" *ngIf="d.Show=='true'" >{{d.Description}}<br> {{d.Note}}</td>
                                                                                            <td  style="width:7%;" *ngIf="d.Show=='true'" [ngStyle]="{'background-color':getColor11(d.Make)}">{{d.Make}}</td>
                                                                                            <td  style="width:6%;" *ngIf="d.Show=='true'" [ngStyle]="{'background-color':getColor12(d.UOM)}">{{d.UOM}}</td>
                                                                                            <td style="width:6%;" *ngIf="d.Show=='true'" [ngStyle]="{'background-color':getColor13(d.Qty)}">{{(+d.Qty).toFixed(0)}}</td>
                                                                                            <td style="width:8%;text-align: right !important;" *ngIf="filterBy == 'Import'" [ngStyle]="{'background-color':getColor14(d.dollarprice)}">{{d.dollarprice}}<span *ngIf="(+DollerRate)>0" >(₹ {{((+d.dollarprice)*(+DollerRate)).toFixed(2)}})</span>  </td>
                                                                                            
                                                                                            <td style="width:6%;text-align: right !important;" *ngIf="filterBy == 'Import'" [ngStyle]="{'background-color':getColor15(d.Rate)}">{{((+d.Rate)/(+d.Qty)).toFixed(2)}}</td>
                                                                                            <td style="width:10%;text-align: right !important;" *ngIf="d.Show=='true' && filterBy == 'Invoice'" [ngStyle]="{'background-color':getColor16(d.Rate)}">{{d.Rate}}</td>
                                                                                            <td style="width:7%;text-align: right !important;" *ngIf="d.Show=='true' && filterBy == 'Invoice'" >{{(+d.Gross).toFixed(2)}}</td>
                                                                                            <td style="width:11%;text-align: right !important;" *ngIf="d.Show=='true' && filterBy == 'Invoice'" [ngStyle]="{'background-color':getColor17(d.DiscountAmount)}">{{d.DiscountAmount}}</td>
                                                                                             <td style="width:6%;text-align: right !important;" *ngIf="d.Show=='true' && filterBy == 'Import'">{{(((+d.bcd)+(+d.sws))/(+d.Qty)).toFixed(2)}}</td> 
                                                                                            <td style="width:8%;text-align: right !important;" *ngIf="d.Show=='true'&& filterBy == 'Invoice'">{{(+d.TotalTax).toFixed(2)}}</td>
                                                                                            <td style="width:8%;text-align: right !important;" *ngIf="d.Show=='true'&& filterBy == 'Import'">{{(((+d.IGSTAmount)+(+d.SGSTAmount)+(+d.CGSTAmount))/(+d.Qty)).toFixed(2)}}</td>
                                                                                            <td style="width:6%;text-align: right !important;" *ngIf="d.Show=='true'&& filterBy == 'Import'">{{((+d.TotalTax)/(+d.Qty)).toFixed(2)}}</td>
                                                                                            <td style="width:7%;text-align: right !important;" *ngIf="d.Show=='true' && filterBy == 'Import'">{{(((+d.TotalTax)/(+d.Qty))+((+d.Rate)/(+d.Qty))).toFixed(2)}}</td>
                                                                                            <td style="width:8%;text-align: right !important;" *ngIf="d.Show=='true'" >{{d.NetTotal}}</td>
                                                                                          <td  style="width:8%;"  >{{d.RefNo2}}</td>
                                                                                            <td style="width:3%;padding: 4px;text-align: center;" *ngIf="d.Show=='true'"  data-toggle="modal"   data-target="#DetailsId"  data-backdrop="static" data-keyboard="false" >
                                                                                                    <div  class="dropdown">
                                                                                                        <a  href="#" data-toggle="dropdown" aria-expanded="false" class="btn btn-gray btn-floating btn-icon btn-sm waves-effect waves-button waves-light">
                                                                                                            <i  aria-hidden="true" class="fa fa-ellipsis-v" style="color: white !important;"></i>
                                                                                                        </a>
                                                                                                        <div  x-placement="bottom-end" class="dropdown-menu dropdown-menu-right" style="position: absolute; will-change: transform; top: 0px; left: 0px; transform: translate3d(30px, 24px, 0px);">
                                                                                                            <button  type="button" data-target="#newRefill" data-toggle="modal" class="dropdown-item font-size-15">Insert Line <i  class="fa fa-plus" style="float: right;" aria-hidden="true"></i></button>
                                                                                                            <button  type="button" data-target="#DetailsId" data-toggle="modal" class="dropdown-item font-size-15" (click)="EditItemClick(d)">Edit<i  class="fa fa-pencil" style="float: right;" aria-hidden="true"></i></button>
                                                                                                            <button  type="button" data-target="#adjust" data-toggle="modal" class="dropdown-item font-size-15">Item Central<i  class="fa fa-file" style="float: right;" aria-hidden="true"></i></button>
                                                                                                            <button  type="button" data-toggle="modal"   data-target="#addNote"   (click)="AddNote(d)"  class="dropdown-item font-size-15">Add Note<i  class="fa fa-pencil" style="float: right;"  aria-hidden="true"></i></button>
                                                                                                            <button  type="button" (click)="DeleteItem(d)" class="dropdown-item font-size-15" >Remove Item<i  class="fa fa-remove" style="float: right;" aria-hidden="true"></i></button>

                                                                                                        </div>
                                                                                                    </div>
                                                                                            </td>
                                                                                    </tr> 
                                                                                      </tbody>
                                                                                  </table>
                                                                              </div>
                                                                              <div class="dataTables_scrollFoot" style="overflow: hidden; border: 0px; width: 100%;">
                                                                                  <div class="dataTables_scrollFootInner" style="width: 100%;">
                                                                                      <table class="table table-striped table-bordered dataTable m-0" role="grid" style="margin-left: 0px; width: 100%;table-layout: fixed;">
                                                                                          <tfoot>
                                                                                              <tr>
                                                                                                  <th style="width:19%;"></th>
                                                                                                  <th style="width:40%;">
                                                                                                  <div class="row">
                                                                                                      <div class="col-md-3 m-top-bot-auto p-0">
                                                                                                          <label class="m-0 p-0" style="font-size: 13px; font-weight: 400; font-family: 'Poppins' !important; color: black;margin-left: 15px !important;">Packing & Frwd Charges</label>
                                                                                                      </div>
                                                                                                      <div class="col-md-9">
                                                                                                         <div class="row">
                                                                                                          <div class="col-md-2 pl-0 ml-auto">
                                                                                                              <label class="m-0">Unit Price</label>
                                                                                                              <input type="text" class="form-control" (change) ="PAFCharges($event.target)"
                                                                                                               formControlName="PackingAmount" placeholder="Unit price" style="text-align: right !important;">
                                                                                                          </div>
                                                                                                          <div class="col-md-2 pl-0 ml-auto" *ngIf="TaxType=='Inter State'">
                                                                                                              <label class="m-0">IGST</label>
                                                                                                              <input type="number" class="form-control" formControlName="PackingIGST" placeholder="IGST" readonly style="text-align: right !important;">
                                                                                                          </div>
                                                                                                          <div class="col-md-1 pl-0 ml-auto" *ngIf="TaxType=='Intra State'">
                                                                                                              <label class="m-0">CGST</label>
                                                                                                              <input type="number" class="form-control" formControlName="PackingCGST" placeholder="CGST" readonly style="text-align: right !important;">
                                                                                                          </div>

                                                                                                          <div class="col-md-2 pl-0 ml-auto" *ngIf="TaxType=='Intra State'">
                                                                                                              <label class="m-0">SGST</label>
                                                                                                              <input type="number" class="form-control" formControlName="PackingSGST" placeholder="SGST" readonly style="text-align: right !important;">
                                                                                                          </div>
                                                                                                          <div class="col-md-3 pl-0 ml-auto" style="text-align: right !important;">
                                                                                                              
                                                                                                              <select id="drpPackingCharges" class="js-example-basic-single mb-3" name="PackingTaxPercentage"
                                                                                                              (change) ="PackingTaxPercentageChange($event.target.value)"
                                                                                                              formControlName="PackingTaxPercentage"> </select>
                                                                                                          </div>
                                                                                                          <div class="col-md-2 pl-0 ml-auto" style="text-align: right !important;">
                                                                                                              <label class="m-0">Total</label>
                                                                                                              <input type="text" class="form-control" placeholder="Net" formControlName="PackingNetTotal"  
                                                                                                              style="text-align: right !important;" readonly>
                                                                                                          </div>
                                                                                                         </div>
                                                                                                      </div>

                                                                                                    
                                                                                                      <div class="col-md-3 m-top-bot-auto p-0">
                                                                                                          <label class="m-0 p-0" style="font-size: 13px; font-weight: 400; font-family: 'Poppins' !important; color: black;margin-left: 15px !important;">
                                                                                                            Trans Charges</label>
                                                                                                      </div>
                                                                                                      <div class="col-md-9">
                                                                                                         <div class="row">
                                                                                                          <div class="col-md-2 pl-0 ml-auto">
                                                                                                              <input type="text" class="form-control" formControlName="TransportAmount" (change) ="TransportCharges($event.target)" placeholder="Unit price" 
                                                                                                              style="text-align: right !important;">
                                                                                                          </div>
                                                                                                          <div class="col-md-2 pl-0 ml-auto" *ngIf="TaxType=='Inter State'">
                                                                                                              <input type="number" class="form-control"  formControlName="TransportIGST" placeholder="IGST" readonly style="text-align: right !important;">
                                                                                                          </div>
                                                                                                          <div class="col-md-2 pl-0 ml-auto" *ngIf="TaxType=='Intra State'">
                                                                                                              <input type="number" class="form-control" formControlName="TransportCGST"  placeholder="CGST" readonly style="text-align: right !important;">
                                                                                                          </div>

                                                                                                          <div class="col-md-2 pl-0 ml-auto" *ngIf="TaxType=='Intra State'">
                                                                                                              <input type="number" class="form-control" formControlName="TransportSGST" placeholder="SGST" readonly style="text-align: right !important;">
                                                                                                          </div>
                                                                                                          <div class="col-md-2 pl-0 ml-auto" style="text-align: center !important;">
                                                                                                              <select name="" id="" formControlName="TransportTaxPercentage"
                                                                                                                   (change) ="TransportTaxPercentageChange($event.target.value)">
                                                                                                                  <option value="0">Select tax%</option>
                                                                                                                  <option value="18">18%</option>
                                                                                                                  <option value="28">28%</option>
                                                                                                              </select>

                                                                                                             
                                                                                                          </div>
                                                                                                          <div class="col-md-2 pl-0 ml-auto" style="text-align: right !important;">
                                                                                                              <input type="text" class="form-control" formControlName="TransportNetTotal" placeholder="Net"  style="text-align: right !important;" readonly>
                                                                                                          </div>
                                                                                                         </div>
                                                                                                      </div>
                                                                                                      <div class="col-md-3 m-top-bot-auto p-0">
                                                                                                          <label class="m-0 p-0" style="font-size: 13px; font-weight: 400; font-family: 'Poppins' !important; color: black;margin-left: 15px !important;">Load Charges</label>
                                                                                                      </div>
                                                                                                      <div class="col-md-9">
                                                                                                         <div class="row">
                                                                                                          <div class="col-md-2 pl-0 ml-auto">
                                                                                                              <input type="text" class="form-control"  formControlName="LoadingAmount" placeholder="Unit price" style="text-align: right !important;">
                                                                                                          </div>
                                                                                                          <div class="col-md-2 pl-0 ml-auto" *ngIf="TaxType=='Inter State'">
                                                                                                              <input type="number" class="form-control" formControlName="LoadingIGST" placeholder="IGST" readonly style="text-align: right !important;">
                                                                                                          </div>
                                                                                                          <div class="col-md-2 pl-0 ml-auto" *ngIf="TaxType=='Intra State'">
                                                                                                              <input type="number" class="form-control" formControlName="LoadingCGST" placeholder="CGST" readonly style="text-align: right !important;">
                                                                                                          </div>

                                                                                                          <div class="col-md-2 pl-0 ml-auto" *ngIf="TaxType=='Intra State'">
                                                                                                              <input type="number" class="form-control" formControlName="LoadingSGST" placeholder="SGST" readonly style="text-align: right !important;">
                                                                                                          </div>
                                                                                                          <div class="col-md-2 pl-0 ml-auto" style="text-align: center !important;">
                                                                                                              <select name="" id="" formControlName="LoadingTaxPercentage" (change) ="LoadingTaxPercentageChange($event.target.value)">
                                                                                                                  <option value="0">Select tax%</option>
                                                                                                                  <option value="18">18%</option>
                                                                                                                  <option value="28">28%</option>
                                                                                                              </select>
                                                                                                          </div>
                                                                                                          <div class="col-md-2 pl-0 ml-auto" style="text-align: right !important;">
                                                                                                              <input type="text" class="form-control" formControlName="LoadingNetTotal" placeholder="Net"  style="text-align: right !important;" readonly>
                                                                                                          </div>
                                                                                                         </div>
                                                                                                      </div>

                                                                                                      <!-- <div class="col-md-3 m-top-bot-auto p-0">  
                                                                                                          <label class="m-0 p-0" style="font-size: 13px; font-weight: 400; font-family: 'Poppins' !important; color: black;margin-left: 15px !important;">Trans Charges</label>
                                                                                                      </div> -->
                                                                                                      <!-- <div class="col-md-3 pl-0">
                                                                                                          <div class="row">
                                                                                                              <div class="col-md-12">
                                                                                                                  <input type="text" class="form-control" placeholder="Unit price"  style="text-align: right !important;">
                                                                                                              </div>
                                                                                                             </div>
                                                                                                      </div>

                                                                                                      <div class="col-md-3 m-top-bot-auto p-0 text-right">
                                                                                                          <label class="m-0 p-0" style="font-size: 13px; font-weight: 400; font-family: 'Poppins' !important; color: black;    margin-right: 16px !important;">Load Charges</label>
                                                                                                      </div>
                                                                                                      <div class="col-md-3 pl-0">
                                                                                                          <div class="row">
                                                                                                              <div class="col-md-12">
                                                                                                                  <input type="text" class="form-control" placeholder="Unit price"  style="text-align: right !important;">
                                                                                                              </div>
                                                                                                             </div>
                                                                                                      </div> -->

                                                                                                  </div>
                                                                                              </th>
                                                                                              <!-- <th style="width: 0%;"></th> -->
                                                                                              </tr>
                                                                                          </tfoot>
                                                                                      </table>
                                                                                  </div>
                                                                              </div>
                                                                          </div>


                                                                          
                                                                      
                                                                    



                                                               
                                                                  
                                                              </div> 
                                                                  
                                                              </div> 
                                                              </div>

                                                              <div class="tab-pane fade" id="Discount" role="tabpanel" aria-labelledby="Discount-tab">


                                                                  <div class="row row-sm" style="margin-top: 12px;">
                                                                      <div class="container">

                                                                           
                                                                                      
                                                                                    <div class="row col-md-12">
                                                                                      
                                                                                          <table class="table table-bordered table-striped table-responsive-stack " id="tableOne">
                                                                                              <thead >
                                                                                              <tr>
                                                                                                  <th  style="width:4%;">#</th>
                                                                                                  <th  style="width:20%;">Part No</th>
                                                                                                  <th  style="width:30%;">Description</th>
                                                                                                  <th  style="width:10%;">Qty</th>
                                                                                                  <th  style="width:16%;">Gross</th>
                                                                                                  <th  style="width:10%;">Discount %</th>
                                                                                                  <th  style="width:10%;">Discount Amount</th>
                                                                                                   
                                                                                              </tr>
                                                                                              </thead>
                                                                                              <tbody>
                                                                                                  <tr   *ngFor="let d of lstInvoiceItems;"> 
                                                                                                      <td  style="width:4%;" *ngIf="d.Show=='true'" >{{d.SNO}}</td>
                                                                                                      <td  style="width:20%;" *ngIf="d.Show=='true'" >{{d.Partno}}</td> 
                                                                                                      <td  style="width:30%;" *ngIf="d.Show=='true'" >{{d.Description}}</td>
                                                                                                      <td style="width:10%;"  *ngIf="d.Show=='true'" >{{d.Qty}}</td>
                                                                                                      <td  style="width:16%;" *ngIf="d.Show=='true'" >{{d.Gross}}</td>
                                                                                                      <td   style="width:10%;" *ngIf="d.Show=='true'" >{{d.DiscountPercentage}}</td>  
                                                                                                      <td  style="width:10%;" *ngIf="d.Show=='true'" >{{d.DiscountAmount}}</td>
                                                                                                     
                                                                                              </tr>
                                                                                              </tbody>
                                                                                          </table>
                                                                                    </div>

                                                                               
                                                                          </div>
                                                                          
                                                                      </div>

                                                                      

                                                              </div>

                                                              <div class="tab-pane fade" id="Service" role="tabpanel" aria-labelledby="ProductDetails-tab">
                                                                  <div class="row row-sm" style="margin-top: 12px;">
                                                                          <div class="col-md-12">
                                                               

                                                                      <div class ="col-md-12" *ngIf="submitted && lstInvoiceItems.length==0" style="float: left;font-size: 80%">
                                                                          <div  style="color:red ;" >Add atleast one product to save</div>
                                                                      </div> 
                                                                      <div class="dataTables_scroll" >
                                                                          <div class="dataTables_scrollHead" style="overflow: hidden; position: relative; border: 0px; width: 100%;">
                                                                              <div class="dataTables_scrollHeadInner" style="box-sizing: content-box; width:100%; padding-right: 17px;">
                                                                                  <table class="table table-striped table-bordered dataTable m-0" role="grid" style="margin-left: 0px;width: 100%;margin-bottom: 0px;">
                                                                                      <thead>
                                                                                          <tr role="row">
                                                                                              <th style="width:4%;" >#</th>
                                                                                              <th style="width:8%;">Reference</th>
                                                                                              <th style="width:10%;">Part no</th>
                                                                                              <th style="width:20%;">Description</th>
                                                                                              <!-- <th style="width:10%;">Make</th> -->
                                                                                              <th style="width:6%;text-align: center;" >UOM</th>
                                                                                              <th style="width:6%;text-align: center;" >Qty</th>
                                                                                              <th style="width:8%;" *ngIf="filterBy == 'Import'">*$ Price</th>
                                                                                              <th style="width:8%;"*ngIf="filterBy == 'Import'">*ASS.VAL</th>
                                                                                              <th style="width:8%;" *ngIf="filterBy == 'Invoice'">Rate</th>
                                                                                              <th style="width:8%;" *ngIf="filterBy == 'Invoice' ">Gross</th>
                                                                                              <th style="width:8%;" *ngIf="filterBy == 'Invoice'">Discount</th>
                                                                                              <th style="width:8%;" *ngIf="filterBy == 'Invoice'">GST</th>
                                                                                              <th style="width:8%;text-align: right !important;" *ngIf="filterBy == 'Import'">Landed Cost</th>
                                                                                              <th style="width:8%;" *ngIf="filterBy == 'Import'">CUS.DUTY</th>
                                                                                              <th style="width:8%;" >Net</th>
                                                                                              <th style="width:6%;" ></th>
                                                                                          </tr>
                                                                                      </thead>
                                                                                  </table>
                                                                              </div>
                                                                          </div>
                                                                          <div class="dataTables_scrollBody" style="position: relative; overflow: auto; max-height: 400px; width: 100%;display: inline !important;">
                                                                              <table id="example2" class="table table-striped table-bordered dataTable m-0" role="grid" aria-describedby="example2_info" style="width: 100%;">
                                                                                  <thead>
                                                                                      <tr role="row" style="height: 0px;">
                                                                                          <th class="sorting" aria-controls="example2" rowspan="1" colspan="1" style="width: 219px; padding-top: 0px; padding-bottom: 0px; border-top-width: 0px; border-bottom-width: 0px; height: 0px;">
                                                                                              <div class="dataTables_sizing" style="height: 0px; overflow: hidden;">Name</div>
                                                                                          </th>
                                                                                          <th class="sorting" aria-controls="example2" rowspan="1" colspan="1" style="width: 319px; padding-top: 0px; padding-bottom: 0px; border-top-width: 0px; border-bottom-width: 0px; height: 0px;">
                                                                                              <div class="dataTables_sizing" style="height: 0px; overflow: hidden;">Position</div>
                                                                                          </th>
                                                                                          <th class="sorting" aria-controls="example2" rowspan="1" colspan="1" style="width: 167px; padding-top: 0px; padding-bottom: 0px; border-top-width: 0px; border-bottom-width: 0px; height: 0px;">
                                                                                              <div class="dataTables_sizing" style="height: 0px; overflow: hidden;">Office</div>
                                                                                          </th>
                                                                                          <th class="sorting" aria-controls="example2" rowspan="1" colspan="1" style="width: 62px; padding-top: 0px; padding-bottom: 0px; border-top-width: 0px; border-bottom-width: 0px; height: 0px;">
                                                                                              <div class="dataTables_sizing" style="height: 0px; overflow: hidden;">Age</div>
                                                                                          </th>
                                                                                          <th class="sorting" aria-controls="example2" rowspan="1" colspan="1" style="width: 146px; padding-top: 0px; padding-bottom: 0px; border-top-width: 0px; border-bottom-width: 0px; height: 0px;">
                                                                                              <div class="dataTables_sizing" style="height: 0px; overflow: hidden;">Start date</div>
                                                                                          </th>
                                                                                          <th class="sorting" aria-controls="example2" rowspan="1" colspan="1" style="width: 137px; padding-top: 0px; padding-bottom: 0px; border-top-width: 0px; border-bottom-width: 0px; height: 0px;">
                                                                                              <div class="dataTables_sizing" style="height: 0px; overflow: hidden;">Salary</div>
                                                                                          </th>
                                                                                      </tr>
                                                                                  </thead>
                                                                                  <tbody>
                                                                                      <tr  *ngFor="let d of lstserviceparts;">
                                                                                          <td style="width:4%;" *ngIf="d.Show=='true'" >{{d.SNO}}</td>
                                                                                          <td  style="width:8%;">Oil Filter</td>
                                                                                          <td  style="width:10%;" *ngIf="d.Show=='true'" >{{d.Partno}}</td>
                                                                                          <td  style="width:20%;" *ngIf="d.Show=='true'" >{{d.Description}}</td>
                                                                                          <!-- <td  style="width:10%;" *ngIf="d.Show=='true'" >{{d.Make}}</td> -->
                                                                                          <td  style="width:6%;text-align: center;" *ngIf="d.Show=='true'" >{{d.UOM}}</td>
                                                                                          <td style="width:6%;text-align: center;" *ngIf="d.Show=='true'" >{{d.Qty}}</td>
                                                                                          <td  style="width: 8%" *ngIf="filterBy == 'Import'">{{d.dollarprice}}</td>
                                                                                          <td  style="width: 8%" *ngIf="filterBy == 'Import'">{{d.Rate}}</td>
                                                                                          <td style="width:8%;text-align: right !important;" *ngIf="d.Show=='true' && filterBy == 'Invoice'" >{{d.Rate}}</td>
                                                                                          <td style="width:8%;text-align: right !important;" *ngIf="d.Show=='true' && filterBy == 'Invoice'" >{{d.Gross}}</td>
                                                                                          <td style="width:8%;text-align: right !important;" *ngIf="d.Show=='true' && filterBy == 'Invoice'" >{{d.DiscountAmount}}</td>
                                                                                          <td style="width:8%;" *ngIf="d.Show=='true' && filterBy == 'Invoice'" >{{d.TotalTax}}</td>
                                                                                          <td style="width:8%;text-align: right !important;" *ngIf="d.Show=='true' && filterBy == 'Import'">{{(+((+d.bcd)+(+d.sws)+(+d.Rate))/(+d.Qty)).toFixed(2)}}</td>
                                                                                          <td style="width:8%;" *ngIf="d.Show=='true' && filterBy == 'Import'">{{(+d.bcd)+(+d.sws)}}</td>
                                                                                          <td  style="width:8%;" *ngIf="d.Show=='true'" >{{d.NetTotal}}</td>


                                                                                          <td  style="width:6%;padding: 4px;text-align: center;" *ngIf="d.Show=='true'"  data-toggle="modal"   data-target="#DetailsId"  data-backdrop="static" data-keyboard="false" >
                                                                                                  <div  class="dropdown">
                                                                                                      <a  href="#" data-toggle="dropdown" aria-expanded="false" class="btn btn-gray btn-floating btn-icon btn-sm waves-effect waves-button waves-light">
                                                                                                          <i  aria-hidden="true" class="fa fa-ellipsis-v" style="color: white !important;"></i>
                                                                                                      </a>
                                                                                                      <div  x-placement="bottom-end" class="dropdown-menu dropdown-menu-right" style="position: absolute; will-change: transform; top: 0px; left: 0px; transform: translate3d(30px, 24px, 0px);">
                                                                                                          <button  type="button" data-target="#newRefill" data-toggle="modal" class="dropdown-item font-size-15">Insert Line <i  class="fa fa-plus" style="float: right;" aria-hidden="true"></i></button>
                                                                                                          <button  type="button" data-target="#DetailsId" data-toggle="modal" class="dropdown-item font-size-15" (click)="EditItemClick(d)">Edit<i  class="fa fa-pencil" style="float: right;" aria-hidden="true"></i></button>
                                                                                                         
                                                                                                          <button  type="button" data-target="#adjust" data-toggle="modal" class="dropdown-item font-size-15">Item Central<i  class="fa fa-file" style="float: right;" aria-hidden="true"></i></button>

                                                                                                          <!-- <button  type="button" (click)="DeleteItem(d)" class="dropdown-item font-size-15">Remove Item<i  class="fa fa-remove" style="float: right;" aria-hidden="true"></i></button> -->
                                                                                                      </div>
                                                                                                  </div>
                                                                                          </td>
                                                                                  </tr>
                                                                                  </tbody>
                                                                              </table>
                                                                          </div>
                                                                          
                                                                      </div>


                                                                      
                                                                  
                                                                



                                                           
                                                              
                                                          </div> 
                                                              
                                                          </div> 
                                                          </div>


                                                          <div class="tab-pane fade" id="Import" role="tabpanel" aria-labelledby="Import-tab">


                                                              <div class="row row-sm" style="margin-top: 12px;">
                                                                  <div class="container">
                                                               <div class="row">
                                                                      
                                                                   
                                                                      <div class="col-md-4">

                                                                          <div class="card">
                                                                          <div class="card-body">
                                                                              <div class="row">
                                                                                  <div class="col-md-3"><label for="Gross">Total CDV :</label></div>
                                                                                  <div class="col-md-9"><label for="Gross">0</label></div>
                                                                              </div>
                                                                              <div class="row">
                                                                                  <div class="col-md-3"><label for="Discount">Total BCD :</label></div>
                                                                                  <div class="col-md-9"><label for="Discount">0</label></div>
                                                                              </div>
                                                                              <div class="row">
                                                                                  <div class="col-md-3"><label for="Tax">Total EC :</label></div>
                                                                                  <div class="col-md-9"><label for="Tax">0</label></div>
                                                                              </div>
                                                                              <div class="row">
                                                                                  <div class="col-md-3"><label for="Total"> Total HEC:</label></div>
                                                                                  <div class="col-md-9"><label for="Total">₹0.00</label></div>
                                                                              </div>
                                                                              <div class="row">
                                                                                  <div class="col-md-3"><label for="Total">Total :CEC </label></div>
                                                                                  <div class="col-md-9"><label for="Total">₹0.00</label></div>
                                                                              </div>
                                                                              <div class="row">
                                                                                  <div class="col-md-3"><label for="Total">Total SWS :</label></div>
                                                                                  <div class="col-md-9"><label for="Total">₹0.00</label></div>
                                                                              </div>

                                                                              <div class="row">
                                                                                  <div class="col-md-3"><label for="Total">Total Charges:</label></div>
                                                                                  <div class="col-md-9"><label for="Total">₹0.00</label></div>
                                                                              </div>

                                                                              <div class="row">
                                                                                  <div class="col-md-3"><label for="Total">Insurance :</label></div>
                                                                                  <div class="col-md-9"><label for="Total">₹0.00</label></div>
                                                                              </div>

                                                                              <div class="row" style="font-size: large;">
                                                                                  <div class="col-md-3"><label for="Total">Total :</label></div>
                                                                                  <div class="col-md-9"><label for="Total">₹0.00</label></div>
                                                                              </div>
                                                                          </div>
                                                                      </div>
                                                                          
                                                                      </div>

                                                                  </div>     
                                                                                <div class="row col-md-12">
                                                                                  
                                                                                  <table class="table table-bordered table-striped table-responsive-stack " id="tableOne">
                                                                                      <thead >
                                                                                      <tr>
                                                                                          <th style="width:4%;">#</th>
                                                                                          <th style="width:7%;">HSN Code</th>
                                                                                          <th style="width:7%;">CDV</th>
                                                                                          <th style="width:7%;">BCD %</th>
                                                                                          <th style="width:7%;text-align: right !important;">BCD Amount</th>
                                                                                          <th style="width:7%;">EC %</th>
                                                                                          <th style="width:7%;text-align: right !important">EC Amount</th>
                                                                                          <th style="width:7%;">HEC %</th>
                                                                                          <th style="width:7%;text-align: right !important">HEC Amount</th>
                                                                                          <th style="width:7%;">CEC %</th>
                                                                                          <th style="width:7%;text-align: right !important">CEC Amount</th>  
                                                                                          <th style="width:7%;">SWS %</th>
                                                                                          <th style="width:7%;text-align: right !important">SWS Amount</th>
                                                                                          <th style="width:12%;text-align: right !important">Taxable Amount</th>

                                                                                      </tr>
                                                                                      </thead>
                                                                                      <tbody>
                                                                                          <tr *ngFor="let d of lstImportDetails;let indx=index"> 
                                                                                              <td  style="width:4%;">{{indx+1}}</td>
                                                                                              <td style="width:7%;">{{d.HSN}}</td>
                                                                                              <td style="width:7%;">{{d.CDV}}</td>
                                                                                              <td style="width:7%;">{{d.BCDPer}}</td>
                                                                                              <td style="width:7%;text-align: right !important">{{(+d.BCDAmount).toFixed(2)}}</td>
                                                                                              <td style="width:7%;">{{d.ECPer}}</td>
                                                                                              <td style="width:7%;text-align: right !important">{{d.ECAmount}}</td>
                                                                                              <td style="width:7%;">{{d.HECPer}}</td>
                                                                                              <td style="width:7%;text-align: right !important">{{d.HECAmount}}</td>
                                                                                              <td style="width:7%;">{{d.CECPer}}</td>
                                                                                              <td style="width:7%;text-align: right !important">{{d.CECAmount}}</td>
                                                                                              <td style="width:7%;">{{d.SWSPer}}</td>
                                                                                              <td style="width:7%;text-align: right !important">{{(+d.SWSAmount).toFixed(2)}}</td>
                                                                                              <td style="width:12%;text-align: right !important">{{d.TaxbleAmount}}</td>
                                                                                              
                                                                                      </tr>
                                                                                      </tbody>
                                                                                  </table>
                                                                                </div>

                                                                            
                                                                      </div>
                                                                      
                                                                  </div>

                                                                  

                                                          </div>
                                                          
                                                              <div class="tab-pane fade" id="Income" role="tabpanel" aria-labelledby="Income-tab">


                                                                      <div class="row row-sm" style="margin-top: 12px;">
                                                                          <div class="container">

                                                                                  
                                                                                          
                                                                                        <div class="row col-md-12">
                                                                                          
                                                                                              <table class="table table-bordered table-striped table-responsive-stack " id="tableOne">
                                                                                                  <thead >
                                                                                                  <tr *ngIf="filterBy != 'Import'">
                                                                                                      <th style="width:4%;">#</th>
                                                                                                      <th style="width:13%;">Part No</th>
                                                                                                      <th style="width:13%;">HSN Code</th>
                                                                                                      <th style="width:10%;text-align: right !important" >Taxable Amount</th>
                                                                                                      <th style="width:8%;text-align: right !important" *ngIf="TaxType=='Intra State'">CGST%</th>
                                                                                                      <th style="width:8%;text-align: right !important" *ngIf="TaxType=='Intra State'">CGST Amount</th>
                                                                                                      <th style="width:8%;text-align: right !important" *ngIf="TaxType=='Intra State'">SGST%</th>
                                                                                                      <th style="width:8%;text-align: right !important" *ngIf="TaxType=='Intra State'">SGST Amount</th>
                                                                                                      <th style="width:8%;text-align: right !important" *ngIf="TaxType=='Inter State'">IGST%</th>
                                                                                                      <th style="width:8%;text-align: right !important" *ngIf="TaxType=='Inter State'">IGST Amount</th>
                                                                                                      <th style="width:12%;text-align: right !important">Total Tax</th>
                                                                                                  </tr>
                                                                                                  <tr *ngIf="filterBy == 'Import'">
                                                                                                      <th style="width:4%;">#</th>
                                                                                                      <th style="width:7%;">Part No</th>
                                                                                                      <th style="width:9%;text-align: right !important;" >Ass.Value</th>
                                                                                                      <th style="width:7%;">HSN Code</th>
                                                                                                      <!-- <th style="width:7%;" >Taxable Amount</th> -->
                                                                                                      <th style="width:5%;text-align: right !important" >BCD %</th>
                                                                                                      <th style="width:7%;text-align: right !important;" >BCD Amount</th>
                                                                                                      <th style="width:5%;text-align: right !important" >SWS %</th>
                                                                                                      <th style="width:7%;text-align: right !important" >SWS Amount</th>
                                                                                                      <th style="width:6%;text-align: right !important" *ngIf="TaxType=='Intra State'">CGST%</th>
                                                                                                      <th style="width:8%;text-align: right !important" *ngIf="TaxType=='Intra State'">CGST Amount</th>
                                                                                                      <th style="width:6%;text-align: right !important" *ngIf="TaxType=='Intra State'">SGST%</th>
                                                                                                      <th style="width:8%;text-align: right !important" *ngIf="TaxType=='Intra State'">SGST Amount</th>
                                                                                                      <th style="width:6%;text-align: right !important" *ngIf="TaxType=='Inter State'">IGST%</th>
                                                                                                      <th style="width:8%;text-align: right !important" *ngIf="TaxType=='Inter State'">IGST Amount</th>
                                                                                                      <th style="width:7%;text-align: right !important" >Total Tax</th>
                                                                                                        
                                                                                                  </tr>
                                                                                                  </thead>
                                                                                                  <tbody *ngIf="filterBy != 'Import'">
                                                                                                      <tr  *ngFor="let d of lstInvoiceItems;"> 
                                                                                                          <td style="width:4%;" *ngIf="d.Show=='true'" >{{d.SNO}}</td>
                                                                                                          <td style="width:13%;" *ngIf="d.Show=='true'" >{{d.Partno}}</td>
                                                                                                          <td style="width:13%;" *ngIf="d.Show=='true'" >{{d.HSN}}</td>
                                                                                                          <td style="width:10%;text-align: right !important"  *ngIf="d.Show=='true'" >{{(+d.Gross)-(+d.DiscountAmount)}}</td>
                                                                                                          <td style="width:8%;text-align: right !important" *ngIf="TaxType=='Intra State'&& d.Show=='true'">{{(+d.CGST).toFixed(2)}}</td>
                                                                                                          <td style="width:8%;text-align: right !important" *ngIf="TaxType=='Intra State' && d.Show=='true'">{{(+d.CGSTAmount).toFixed(2)}}</td>
                                                                                                          <td style="width:8%;text-align: right !important" *ngIf="TaxType=='Intra State' && d.Show=='true'">{{(+d.SGST).toFixed(2)}}</td>
                                                                                                          <td style="width:8%;text-align: right !important"  *ngIf="TaxType=='Intra State'  &&  d.Show=='true'"> {{(+d.SGSTAmount).toFixed(2)}}</td>
                                                                                                          <td style="width:8%;text-align: right !important" *ngIf="TaxType=='Inter State' && d.Show=='true'">{{(+d.IGST).toFixed(2)}}</td>
                                                                                                          <td style="width:8%;text-align: right !important" *ngIf="TaxType=='Inter State'  && d.Show=='true'">{{(+d.IGSTAmount).toFixed(2)}}</td>
                                                                                                          <td style="width:12%;text-align: right !important" *ngIf="d.Show=='true'">{{(+d.TotalTax).toFixed(2)}}</td>
                                                                                                  </tr>

                                                                                                 
                                                                                                  </tbody>
                                                                                                  <tbody *ngIf="filterBy == 'Import'">
                                                                                                      <tr  *ngFor="let d of lstInvoiceItems;" > 
                                                                                                          <td style="width:4%;" *ngIf="d.Show=='true'" >{{d.SNO}}</td>
                                                                                                          <td style="width:7%;"  *ngIf="d.Show=='true'" >{{d.Partno}}</td>
                                                                                                          <td style="width:9%;text-align: right !important" >{{d.Rate}}</td>
                                                                                                          <td style="width:7%;"  *ngIf="d.Show=='true'" >{{d.HSN}}</td>
                                                                                                          <td style="width:5%;text-align: right !important">{{d.bcdper}}</td>
                                                                                                          <td style="width:7%;text-align: right !important">{{(+d.bcd).toFixed(2)}}</td>
                                                                                                          <td style="width:5%;text-align: right !important">{{d.swsper}}</td>
                                                                                                          <td style="width:7%;text-align: right !important"   *ngIf="d.Show=='true'" >{{(+d.sws).toFixed(2)}}</td>
                                                                                                          <td style="width:6%;text-align: right !important" *ngIf="TaxType=='Intra State'&& d.Show=='true'">{{(+d.CGST).toFixed(2)}}</td>
                                                                                                          <td style="width:8%;text-align: right !important" *ngIf="TaxType=='Intra State' && d.Show=='true'">{{(+d.CGSTAmount).toFixed(2)}}</td>
                                                                                                          <td style="width:6%;text-align: right !important" *ngIf="TaxType=='Intra State' && d.Show=='true'">{{(+d.SGST).toFixed(2)}}</td>
                                                                                                          <td style="width:8%;text-align: right !important"  *ngIf="TaxType=='Intra State'  &&  d.Show=='true'">{{(+d.SGSTAmount).toFixed(2)}}</td>
                                                                                                          <td style="width:6%;text-align: right !important" *ngIf="TaxType=='Inter State' && d.Show=='true'">{{(+d.IGST).toFixed(2)}}</td>
                                                                                                          <td style="width:8%;text-align: right !important" *ngIf="TaxType=='Inter State'  && d.Show=='true'">{{(+d.IGSTAmount).toFixed(2)}}</td>
                                                                                                          <td style="width:7%;text-align: right !important"  *ngIf="d.Show=='true'">{{(+d.TotalTax).toFixed(2)}}</td>
                                                                                                  </tr>
  
                                                                                                  </tbody>
                                                                                              </table>
                                                                                        </div>

                                                                                    
                                                                              </div>
                                                                              
                                                                          </div>

                                                                          

                                                              </div>
                                                              
                                                              <!-- <div class="tab-pane fade" id="Frieght" role="tabpanel" aria-labelledby="ProductDetails-tab">
                                                                  <div class="row row-sm" style="margin-top: 12px;">
                                                                      <div class="col-md-12">
                                                                          <div class="row">
                                                                          <div class="col-md-2">
                                                                              <label>Charges By</label>
                                                                              <select class="mb-3 form-control">
                                                                                  <option>Value</option>
                                                                                  <option>Weight</option>
                                                                              </select>
                                                                          </div>
  
                                                                          
  
                                                                          <div class="col-md-2">
                                                                              <h4>Frieght Charges</h4>
                                                                              <label>Frieght Account</label>
                                                                              <select id="drpfreightchargesaccount" class="mb-3 form-control"
                                                                              formControlName="freightchargesaccount"
                                                                 
                                                                               >
                                                                             
                                                                              <option  *ngFor="let d of lstfreightchargesaccount"
                                                                              [attr.selected]="(d.COAId==f.freightchargesaccount.value) ? 'selected' : null"
                                                                             
                                                                              [value]="d.COAId">{{d.Name}}</option>
                                                                             
                                                                               </select>
                                                                              <label>Frieght Amount</label>
                                                                              <input type="number"  formControlName="freigntcharges" (change) ="freigntchargesChange($event.target)" class="form-control">
                                                                          </div>
                                                                          <div class="col-md-2">
                                                                              <h4>Loading Charges</h4>

                                                                              <label>Loading Charge Account</label>
                                                                              <select id="drploadingchargesaccount" class="mb-3 form-control" formControlName="loadingchargesaccount" >
                                                                                 
                                                                                  <option  *ngFor="let d of lstloadingchargesaccount" [attr.selected]="(d.COAId==f.loadingchargesaccount.value) ? 'selected' : null"
                                                                                 
                                                                                  [value]="d.COAId">{{d.Name}}</option>
                                                                                 
                                                                                   
                                                                               
                                                                                </select>

                                                                              <label>Loading Charge Amount</label>
                                                                              <input type="number" formControlName="loadingcharges" (change) ="loadingchargesChange($event.target)" class="form-control">
                                                                          </div>
  
                                                                          
                                                                          <div class="col-md-2">
                                                                              <h4>Insurance</h4>

                                                                              <label>Insurance Account</label>
                                                                              <select id="drpinsuranceaccount" class="mb-3 form-control"
                                                                              formControlName="insuranceaccount"
                                                                 
                                                                             >
                                                                             
                                                                              <option  *ngFor="let d of lstinsuranceaccount"
                                                                              [attr.selected]="(d.COAId==f.lstinsuranceaccount.value) ? 'selected' : null"
                                                                             
                                                                              [value]="d.COAId">{{d.Name}}</option>
                                                                             
                                                                               
                                                                           
                                                                            </select>

                                                                              <label>Insurance %</label>

                                                                              <label>Insurance Amount</label>
                                                                              <input type="number" formControlName="insuranceamount" (change) ="insuranceamountChange($event.target)" class="mb-3 form-control">
                                                                          </div>
                                                                         
                                                                          <div class="col-md-2">
                                                                              <h4>Clearing Charges</h4>

                                                                              <label>Clearing Charges Acc</label>
                                                                              <select id="drpclearingchargesaccount" class="mb-3 form-control"
                                                                              formControlName="clearingchargesaccount"
                                                                 
                                                                             >
                                                                             
                                                                              <option  *ngFor="let d of lstclearingchargesaccount"
                                                                              [attr.selected]="(d.COAId==f.clearingchargesaccount.value) ? 'selected' : null"
                                                                             
                                                                              [value]="d.COAId">{{d.Name}}</option>
                                                                             
                                                                               
                                                                           
                                                                            </select>

                                                                              <label>Clearing Charges Amount</label>
                                                                              <input type="number" formControlName="clearingcharges" (change) ="clearingchargesChange($event.target)" class="mb-3 form-control">
                                                                          </div>
                                                                      </div>
                                                                      </div>
                                                                     
                                                                  </div>
                                                              </div> -->

                                                              <div class="tab-pane fade" id="CustomDuty" role="tabpanel" aria-labelledby="ProductDetails-tab">
                                                                  <div class="row row-sm" style="margin-top: 12px;">
                                                                      <div class="col-md-12">
                                                                                  
                                                                          <table class="table table-bordered table-striped table-responsive-stack " id="tableOne">
                                                                              <thead >
                                                                              <tr>
                                                                                  <th style="width:4%;">#</th>
                                                                                  <th style="width:9%;text-align: right !important;">Ass.Value</th>
                                                                                  <th style="width:9%;text-align: right !important;">HSN Code</th>
                                                                                  <th style="width:9%;text-align: right !important;">CDV</th>
                                                                                  <th style="width:9%;text-align: right !important;">BCD %</th>
                                                                                  <th style="width:9%;text-align: right !important;">BCD Amount</th>
                                                                                  <!-- <th style="width:7%;">EC %</th>
                                                                                  <th style="width:7%;">EC Amount</th>
                                                                                  <th style="width:7%;">HEC %</th>
                                                                                  <th style="width:7%;">HEC Amount</th> -->
                                                                                  <th style="width:9%;text-align: right !important;">CEC %</th>
                                                                                  <th style="width:9%;text-align: right !important;">CEC Amount</th>  
                                                                                  <th style="width:9%;text-align: right !important;">SWS %</th>
                                                                                  <th style="width:9%;text-align: right !important;">SWS Amount</th>
                                                                                  <th style="width:15%;text-align: right !important;">Total Amount</th>

                                                                              </tr>
                                                                              </thead>
                                                                              <tbody>
                                                                                  <tr *ngFor="let d of lstImportDetails;let indx=index"> 
                                                                                      <td  style="width:4%;">{{indx+1}}</td>
                                                                                      <td style="width:9%;text-align: right !important;">99.00</td>
                                                                                      <td style="width:9%;text-align: right !important;">{{d.HSN}}</td>
                                                                                      <td style="width:9%;text-align: right !important;">{{d.CDV}}</td>
                                                                                      <td style="width:9%;text-align: right !important;">{{d.BCDPer}}</td>
                                                                                      <td style="width:9%;text-align: right !important;">{{(+d.BCDAmount).toFixed(2)}}</td>
                                                                                      <!-- <td style="width:7%;">{{d.ECPer}}</td>
                                                                                      <td style="width:7%;">{{d.ECAmount}}</td>
                                                                                      <td style="width:7%;">{{d.HECPer}}</td>
                                                                                      <td style="width:7%;">{{d.HECAmount}}</td> -->
                                                                                      <td style="width:9%;text-align: right !important;">{{d.CECPer}}</td>
                                                                                      <td style="width:9%;text-align: right !important;">{{d.CECAmount}}</td>
                                                                                      <td style="width:9%;text-align: right !important;">{{d.SWSPer}}</td>
                                                                                      <td style="width:9%;text-align: right !important;">{{(+d.SWSAmount).toFixed}}</td>
                                                                                      <td style="width:15%;text-align: right !important;">{{(+d.TaxbleAmount).toFixed(2)}}</td>
                                                                                      
                                                                              </tr>
                                                                              </tbody>
                                                                          </table>
                                                                        </div>
                                                                  </div>
                                                              </div>

                                                              <div class="tab-pane fade" id="Charges" role="tabpanel" aria-labelledby="Charges-tab">
                               
                               
                                                                  <div class="row row-sm" style="margin-top: 12px;">
                                                                     <div class="col-md-4">
                                                                      <label for="" class="m-0">Notes</label>
                                                                      <textarea name="" id="" class="form-control" placeholder="Enter Notes Here.." formControlName="notes" rows="5"></textarea>
                                                                     </div>
                                                                  </div>
                                                              </div>


                                                              <div class="tab-pane fade" id="Accounts" role="tabpanel" aria-labelledby="Accounts-tab">
                                                                  <div class="row row-sm">
                                                                      <div class="col-md-12">
                              
                              
                                                                          <br>
                                                                                 <div class="">
                                                                                     <div class="">
                                                                                      <div class="row">
                                                                                     
                                                                              <!-- <div class=" col-md-2">
                                                                                  <label for="drpPurchaseAccount">Purchase Account</label>
                                                                                  <select id="drPurchaseAccount" class="mb-3 form-control" formControlName="Purchaseaccount">
                                                                                  <option  *ngFor="let d of lstPurchaseAccounts" [attr.selected]="(d.COAId==f.Purchaseaccount.value) ? 'selected' : null" [value]="d.COAId">{{d.Name}}</option>
                                                                                   </select>
                                                                              </div>
                                                                              <div class="col-md-2">
                                                                                  <label for="drpDiscountAccount">Discount Account</label>
                                                                                  <select id="drpDiscountAccount" class="mb-3 form-control" formControlName="Discountaccount" >
                                                                                  <option  *ngFor="let d of lstDiscountAccount" [attr.selected]="(d.COAId==f.Discountaccount.value) ? 'selected' : null" [value]="d.COAId">{{d.Name}}</option>
                                                                                   </select>
                                                                              </div>
                              
                                                                              <div class="col-md-2">
                                                                                  <label for="drpFrieghtChargesAccount">Frieght Charges Account</label>
                                                                                  <select id="drpFrieghtChargesAccount" class="mb-3 form-control" formControlName="FrieghtChargesAccount">
                                                                                  <option  *ngFor="let d of lstFrieghtChargesAccount" [attr.selected]="(d.COAId==f.FrieghtChargesAccount.value) ? 'selected' : null" [value]="d.COAId">{{d.Name}}</option>
                                                                                 </select>
                                                                              </div>
                              
                                                                              <div class="col-md-2">
                                                                                  <label for="drpLoadinChargesAccount">Loading Charges Account</label>
                                                                                  <select id="drpLoadinChargesAccount" class="mb-3 form-control" formControlName="LoadinChargesAccount">
                                                                                  <option  *ngFor="let d of lstLoadinChargesAccount" [attr.selected]="(d.COAId==f.LoadinChargesAccount.value) ? 'selected' : null" [value]="d.COAId">{{d.Name}}</option>
                                                                                  </select>
                                                                              </div>

                                                                              
                                                                              <div class="col-md-2">                     
                                                                                  <label for="drpInsuranceAccount">Insurance Account</label>
                                                                                  <select id="drpInsuranceAccount" class="mb-3 form-control" formControlName="InsuranceAccount">
                                                                                  <option  *ngFor="let d of lstInsuranceAccount" [attr.selected]="(d.COAId==f.InsuranceAccount.value) ? 'selected' : null" [value]="d.COAId">{{d.Name}}</option>
                                                                                  </select>
                                                                              </div> -->
                                                                              <div class="col-md-12 m-top-auto">
                                                                                  <div class="row">
                                                                                      <div class="col-md-6"></div>
                                                                                      <div class="col-md-6 text-right mb-3">
                                                                                          <button class="btn btn-light" (click)="chargeaccnt()" data-toggle="modal"   data-target="#NewCharges">Add Charges Account</button>
                                                                                      </div>

                                                                                  </div>
                                                                              </div>
                                                                              <div class="col-md-12">
                                                                                  <div class="card" style="background: #e1e1e130;" *ngFor="let f of lstchargeaccnt">
                                                                                      <div class="card-body" >
                                                                                          <div class="row">
                                                                                              <div class="col-md-6">
                                                                                                  <div class="row">
                                                                                                      <div class="col-md-2 m-top-bot-auto"><label for="drpvendorsdata" class="m-0">Vendor</label></div>
                                                                                                      <div class="col-md-10">
                                                                                                          <input type="text" class="form-control" value="{{f.Vendorname1}}" readonly>
                                                                                                      </div>
                                                                                                  </div>
                                                                                              </div>
                                                                                              <div class="col-md-2">
                                                                                                  <div class="row">
                                                                                                      <div class="col-md-4 m-top-bot-auto"><label for="" class="m-0">Ref No</label></div>
                                                                                                      <div class="col-md-8">
                                                                                                          <input type="text" class="form-control" value="{{f.refno}}" readonly placeholder="Enter ref no">
                                                                                                      </div>
                                                                                                  </div>
                                                                                              </div>
                                                                                              <div class="col-md-2">
                                                                                                  <div class="row">
                                                                                                      <div class="col-md-2 m-top-bot-auto">
                                                                                                          <label for=""  class="m-0">Date</label></div>
                                                                                                      <div class="col-md-10">
                                                                                                          <input type="date" value="{{f.chargeDate}}" readonly class="form-control" >
                                                                                                      </div>
                                                                                                  </div>
                                                                                              </div>
                                                                                              <div class="col-md-2 ">
                                                                                                  <div  class="row">
                                                                                                      <!-- <div class="col-md-6">
                                                                                                          <button class="btn btn-warning" data-toggle="modal"   data-target="#ChargeDetailsId" 
                                                                                                          (click)="AddItems()" >Add Item</button>
                                                                                                      </div> -->
                                                                                                      <div class="col-md-6">
                                                                                                          <button class="btn btn-warning" 
                                                                                                          (click)="ClearItem(f)" >Clear</button>
                                                                                                      </div>
                                                                                                      <div class="col-md-6">
                                                                                                          <button class="btn btn-warning" data-toggle="modal"   data-target="#NewCharges"
                                                                                                          (click)="EditArrayrecord(f)" >Edit</button>
                                                                                                      </div>
                                                                                                  </div>
                                                                                                   
                                                                                                          
                                                                                                 
                                                                                              </div>
                                                                                             
                                                                                              <div class="col-md-12 mb-3"></div>
                                                                                              
              
                                                                                              <div  class="col-md-12" data-select2-id="1848">
                                                                                             
              
                                                                                                  <div class="dataTables_scroll" >
                                                                                                      <div class="dataTables_scrollHead" style="overflow: hidden; position: relative; border: 0px; width: 100%;">
                                                                                                          <div class="dataTables_scrollHeadInner" style="box-sizing: content-box; width:100%; padding-right: 17px;">
                                                                                                              <table class="table table-striped table-bordered dataTable m-0" role="grid" style="margin-left: 0px;width: 100%;margin-bottom: 0px;">
                                                                                                                  <thead>
                                                                                                                      <tr  role="row">
                                                                                                                          <th  style="width: 5%;">#</th>
                                                                                                                          <th  style="width: 15%;">Particulars</th>
                                                                                                                          <th  style="width: 15%;">Description</th>
                                                                                                                          <th  style="width: 10%;">HSN</th>
                                                                                                                          <th  style="width: 10%;">Gross</th>
                                                                                                                          <th  style="width: 10%;" *ngIf="(+f.lstchargeacntitems[0].IGSTAmount1)>0">IGST</th>
                                                                                                                          <th  style="width: 7%;" *ngIf="(+f.lstchargeacntitems[0].CGSTAmount1)>0">CGST</th>
                                                                                                                          <th  style="width: 8%;" *ngIf="(+f.lstchargeacntitems[0].SGSTAmount1)>0">SGST</th>
                                                                                                                          <th  style="width: 15%;">Tax Amount</th>
                                                                                                                          <th  style="width: 15%;">Total</th>
                                                                                                                          <th  style="width: 5%;"></th>
                                                                                                                      </tr>
                                                                                                                  </thead>
                                                                                                              </table>
                                                                                                          </div>
                                                                                                      </div>
                                                                                                      <div class="dataTables_scrollBody" style="position: relative; overflow: auto; max-height: 400px; width: 100%;display: inline !important;">
                                                                                                          <table id="example2" class="table table-striped table-bordered dataTable m-0" role="grid" aria-describedby="example2_info" style="width: 100%;">
                                                                                                              <thead>
                                                                                                                  <tr role="row" style="height: 0px;">
                                                                                                                      <th class="sorting" aria-controls="example2" rowspan="1" colspan="1" style="width: 219px; padding-top: 0px; padding-bottom: 0px; border-top-width: 0px; border-bottom-width: 0px; height: 0px;">
                                                                                                                          <div class="dataTables_sizing" style="height: 0px; overflow: hidden;">Name</div>
                                                                                                                      </th>
                                                                                                                      <th class="sorting" aria-controls="example2" rowspan="1" colspan="1" style="width: 319px; padding-top: 0px; padding-bottom: 0px; border-top-width: 0px; border-bottom-width: 0px; height: 0px;">
                                                                                                                          <div class="dataTables_sizing" style="height: 0px; overflow: hidden;">Position</div>
                                                                                                                      </th>
                                                                                                                      <th class="sorting" aria-controls="example2" rowspan="1" colspan="1" style="width: 167px; padding-top: 0px; padding-bottom: 0px; border-top-width: 0px; border-bottom-width: 0px; height: 0px;">
                                                                                                                          <div class="dataTables_sizing" style="height: 0px; overflow: hidden;">Office</div>
                                                                                                                      </th>
                                                                                                                      <th class="sorting" aria-controls="example2" rowspan="1" colspan="1" style="width: 62px; padding-top: 0px; padding-bottom: 0px; border-top-width: 0px; border-bottom-width: 0px; height: 0px;">
                                                                                                                          <div class="dataTables_sizing" style="height: 0px; overflow: hidden;">Age</div>
                                                                                                                      </th>
                                                                                                                      <th class="sorting" aria-controls="example2" rowspan="1" colspan="1" style="width: 146px; padding-top: 0px; padding-bottom: 0px; border-top-width: 0px; border-bottom-width: 0px; height: 0px;">
                                                                                                                          <div class="dataTables_sizing" style="height: 0px; overflow: hidden;">Start date</div>
                                                                                                                      </th>
                                                                                                                      <th class="sorting" aria-controls="example2" rowspan="1" colspan="1" style="width: 137px; padding-top: 0px; padding-bottom: 0px; border-top-width: 0px; border-bottom-width: 0px; height: 0px;">
                                                                                                                          <div class="dataTables_sizing" style="height: 0px; overflow: hidden;">Salary</div>
                                                                                                                      </th>
                                                                                                                  </tr>
                                                                                                              </thead>
                                                                                                              <tbody>
                                                                                                                  <tr *ngFor="let d of f.lstchargeacntitems,let ind =index">
                                                                                                                      <td style="width: 5%;">{{ind+1}}</td>
                                                                                                                      <td style="width: 15%;">{{d.Partno}}</td>
                                                                                                                      <td style="width: 15%;" data-select2-id="1844">{{d.description1}}</td>
                                                                                                                      <td style="width: 10%;">{{d.HSN1}}</td>
                                                                                                                      <td style="width: 10%;">{{(+d.TaxAmount1).toFixed(2)}}</td>
                                                                                                                      <td style="width: 10%;" *ngIf="(+d.IGSTAmount1)>0">{{(+d.IGSTAmount1).toFixed(2)}}</td>
                                                                                                                      <td style="width: 7%;" *ngIf="(+d.CGSTAmount1)>0">{{(+d.CGSTAmount1).toFixed(2)}}</td>
                                                                                                                      <td style="width: 8%;" *ngIf="(+d.SGSTAmount1)>0">{{(+d.SGSTAmount1).toFixed(2)}}</td>
                                                                                                                      <td style="width: 15%;">{{(+d.GSTAmount1).toFixed(2)}}</td>
                                                                                                                      <td style="width: 15%;">  {{(+d.TotalAmount1).toFixed(2)}}</td>
                                                                                                                      <td style="width: 5%;text-align: center;" data-toggle="modal"   data-target="#DetailsId"  data-backdrop="static" data-keyboard="false" >
                                                                                                                              <div  class="dropdown">
                                                                                                                                  <a  href="#" data-toggle="dropdown" aria-expanded="false" class="btn btn-gray btn-floating btn-icon btn-sm waves-effect waves-button waves-light">
                                                                                                                                      <i  aria-hidden="true" class="fa fa-ellipsis-v" style="color: white !important;"></i>
                                                                                                                                  </a>
                                                                                                                                  <div  x-placement="bottom-end" class="dropdown-menu dropdown-menu-right" style="position: absolute; will-change: transform; top: 0px; left: 0px; transform: translate3d(30px, 24px, 0px);">
                                                                                                                                      <button  type="button" data-target="#newRefill" data-toggle="modal" class="dropdown-item font-size-15">Insert Line <i  class="fa fa-plus" style="float: right;" aria-hidden="true"></i></button>
                                                                                                                                      <button  type="button" data-target="#DetailsId" data-toggle="modal" class="dropdown-item font-size-15" >Edit<i  class="fa fa-pencil" style="float: right;" aria-hidden="true"></i></button>
                                                                                                                                      <button  type="button" data-target="#adjust" data-toggle="modal" class="dropdown-item font-size-15">Item Central<i  class="fa fa-file" style="float: right;" aria-hidden="true"></i></button>
                                                                                                                                      <button  type="button" class="dropdown-item font-size-15">Delete<i  class="fa fa-trash" style="float: right;" aria-hidden="true"></i></button>
                                                                                                                                  </div>
                                                                                                                              </div>
                                                                                                                      </td>
                                                                                                              </tr>
                                                                                                              </tbody>
                                                                                                          </table>
                                                                                                      </div>
                                                                                                      
                                                                                                  </div>
              
                                                                                              </div>
                                                                                          </div>
                                                                                      </div>
                                                                                  </div>
                                                                              </div>
                                                                          </div>
                                                                      </div>
                                                                      </div>                                                                     
                                                                      </div>
                                                                  </div>
                                                              </div>
                                                          </div>
                                                      </div>
                                                  </div>
                                              </div>
                                          </div>
                                          

                                          <div class="col-md-2">
                                              <div class="card">
                                                  <div class="card-header"  style="font-size: large;">Outstanding : 0.00</div>
                              
                                                  <div class="card-body pb-4" style="padding-top: 5px;">
                                                      <div class="row">
                                                          <div class="col-md-12">
                                                              <div class="row">
                                                                  <div class="col-md-6">
                                                                      <label for="Gross" class="m-0"><strong class="f-15">Gross  </strong></label> <p class="m-0  p-0 f-15" style="float: right;">:</p>
                                                                  </div>
                                                                  <div class="col-md-6">
                                                                      <!-- <span><strong class="f-15">{{((+TotalGross) * (+ExchangeRate)).toFixed(2)}}</strong></span> -->
                                                                      <span><strong class="f-15">{{((+TotalGross) ).toFixed(2)}}</strong></span>
                                                                  </div>
                              
                                                                  <div class="col-md-6">
                                                                      <label for="Gross" class="m-0"><strong class="f-15">Discount  </strong></label> <p class="m-0  p-0 f-15" style="float: right;">:</p>
                                                                  </div>
                                                                  <div class="col-md-6">
                                                                      <!-- <span><strong class="f-15">{{((+TotalDiscount) * (+ExchangeRate)).toFixed(2) }}</strong></span> -->
                                                                      <span><strong class="f-15">{{((+TotalDiscount) ).toFixed(2) }}</strong></span>
                                                                  </div>
                              
                                                                  <div class="col-md-6">
                                                                      <label for="Gross" class="m-0"><strong class="f-15">Charges  </strong></label> <p class="m-0  p-0 f-15" style="float: right;">:</p>
                                                                  </div>
                                                                  <div class="col-md-6">
                                                                      <!-- <span><strong class="f-15">{{((TotalCharges) * (ExchangeRate)).toFixed(2)}}</strong></span> -->
                                                                      <span><strong class="f-15">{{((TotalCharges) ).toFixed(2)}}</strong></span>
                                                                  </div>
                                                                  
                              
                                                                  <div class="col-md-6">
                                                                      <label for="Gross" class="m-0" style="margin-bottom: 4px;"><strong class="f-15">GST  </strong></label> <p class="m-0  p-0 f-15" style="float: right;">:</p>
                                                                  </div>
                                                                  <div class="col-md-6">
                                                                      <!-- <span><strong class="f-15" >{{((+TotalTax) * (+ExchangeRate)).toFixed(2)}}</strong></span> -->
                                                                      <span><strong class="f-15" >{{((+TotalTax) ).toFixed(2)}}</strong></span>
                                                                  </div>
                              
                                                              </div> 
                                                          </div>
                              
                                                          <div class ="col-md-12 text-center" >
                                                              <!-- <label for="Total" class="f-33 f-w-900 m-0" style="font-family: revert;margin-bottom: 4px !important;">{{((+Total)* (+ExchangeRate)).toFixed(2)|currency:'INR' }}</label>   -->
                                                              <label for="Total" class="f-33 f-w-900 m-0" style="font-family: revert;margin-bottom: 4px !important;">{{((+Total)).toFixed(2)|currency:'INR' }}</label>  
                                                          </div>
                              
                                                         
                                                          <div class ="col-md-12" *ngIf="submitted && Total<1" style="font-size: 80%;">
                                                              <div  style="color:red ;font-size: 80%;" >Invalid  Amount to Save</div>
                                                             
                                                          </div>
                              
                                                          <!-- <div class ="col-md-6" style="font-size: large;">
                                                              <label for="Total">Payment:</label>  
                                                          </div>
                              
                                                          <div class ="col-md-6" style="font-size: large;">  
                                                              <label for="Total">{{TotalPayments|currency:'INR' }}</label>
                                                          </div> -->
                                                      </div>
                                                  </div>
                              
                              
                                              </div>

                                              <div  class="card">
                                                  <div  class="card-header">
                                                      <div  class="row">
                                                          <div  class="col-md-8 m-top-bot-auto" style="font-size: 16px;">Activity Tracker</div>
                                                          <div  class="col-md-4 p-0">
                                                              <div class="form-group m-0">
                                                                  <div class="custom-control custom-switch custom-checkbox-warning">
                                                                      <input type="checkbox" class="custom-control-input" id="customSwitchInline1" (click)="on()">
                                                                      <label class="custom-control-label" for="customSwitchInline1" style="margin-right: 8px;">{{ToggleValue}}</label>

                                                                  </div>
                                                              </div>

                                                             
                                                          </div>
                                                      </div>
                                                  </div>
                                                  <div  class="card-body" style="padding: 5px;">
                                                      <div  class="accordion" id="d.PurchaseInvoiceId" *ngFor="let d of lstrackPurchaseInvoice;">
                                                          <div  class="card" style="margin-right: 0px !important;">
                                                              <div  class="card-header" id="headingOne" [ngStyle]="{'background':getColor(d.statusreport)}">
                                                                  <button
                                                                      
                                                                      aria-controls="collapseOne"
                                                                      aria-expanded="true"
                                                                      class="btn btn-link waves-effect waves-button waves-light acrd-text"
                                                                      data-target="#collapseTwo"
                                                                      data-toggle="collapse"
                                                                      style="color: #212529;"
                                                                      type="button"
                                                                      autocomplete="off"
                                                                  >
                                                                      {{d.CreatedBy}}  <sub ></sub>
                                                                  </button>
                                                              </div>
                                                              <div  aria-labelledby="headingTwo" class="collapse show" data-parent="#d.PurchaseInvoiceId" id="collapseTwo">
                                                                  <div  class="card-body" style="padding: 10px;">
                                                                      <div class="row">
                                                                          <div class="col-md-10">
                                                                              <p  class="p-0 m-0">
                                                                                  {{d.statusreport}}
                                                                              </p>
                                                                              <p  class="p-0 m-0">
                                                                                  {{d.Message}}
                                                                              </p>
                                                                          </div>
                                                                          <div class="col-md-2 text-center">
                                                                              <i class="fa fa-eye" (click)="Showdata(d)"></i>
                                                                          </div>
                                                                      </div>
                                                                  </div>
                                                              </div>
                                                          </div>
                                                        
                                                      </div>
                                                     
                                                  </div>
                                              </div>

                                          </div>

                                         
                                                                           
                                             

                                         
                                      </div>
                              
                                  </div>

                                

                         


                                  
                                      <div class="modal fade" id="DetailsId"  role="dialog" aria-labelledby="DetailsId" aria-hidden="true">
                                          <div class="modal-dialog modal-dialog-centered" role="document" style="max-width: 900px;">
                                              <div class="modal-content" style="width: 900px;">
                                                  <div class="modal-header">
                                                      <h5 class="modal-title" id="DetailsId">Add / Modify Details</h5>
                                                      <p *ngIf="showError" class="invalid-data"><font color="red">{{errormsg}}</font></p>
                                                      <button type="button"   style="display: none;"  id="btnCloseAddItem" class="close" data-dismiss="modal" aria-label="Close">
                                                          <span aria-hidden="true">&times;</span>
                                                      </button>
                                                  </div>
                                                  
                                          <div class="row" style ="padding: 15px;">
                                              <div class="col-md-12">

                                              <app-add-purchase-product-details
                                              [TransactionDate]="TransactionDate"
                                              [TransactionType]="TransactionType"
                                              [TaxType]="TaxType"
                                              [PartyId]="PartyId"
                                              [ShowStockSelection]="ShowStockSelection"
                                              [type]="type"
                                              [SelectedRow]="SelectedProductData"
                                              (RemoveItemClick)="RemoveItemClick($event)"
                                                          (AddItemAndCloseClick)="AddItemAndCloseClick($event)"
                                                          (AddItemAndNewClick)="AddItemAndNewClick($event)"
                                              ></app-add-purchase-product-details>
                                          </div>
                                          </div>
                                          </div>
                                          </div>
                                      </div> 


                                      <div class="modal fade" id="ItemDetailsSearch"  role="dialog" aria-labelledby="ItemDetailsSearch" aria-hidden="true">
                                          <div class="modal-dialog modal-dialog-centered" role="document" style="max-width: 500px;">
                                              <div class="modal-content" style="width: 500px;">
                                                  <div class="modal-header">
                                                      <h5 class="modal-title" id="ItemDetailsSearch">Search</h5>
                                                      
                                                      <button type="button"  id="btnItemDetailsSearch" class="close" data-dismiss="modal" aria-label="Close">
                                                          <span aria-hidden="true">&times;</span>
                                                      </button>
                                                      
                                                     
                                                  </div>
                                                  
                              <div class="row">
                                                  <div class="col-md-12">
                                                      <div class="card">
                                                          <!-- <div class="card-header">Search</div> -->
                                                          <div class="card-body">
  
  
                                                              <div class="custom-control custom-switch" style="float:left">
                                                                      <input type="checkbox" class="custom-control-input" id="customSwitch" checked="" (change)="FilterTypeChange($event)">
                                                                      <label class="custom-control-label" for="customSwitch">All Data</label>
                                                                  </div>
                              
                                                                 
                              
                                                                  <div class="custom-control custom-switch custom-checkbox-success" style="float: right">
                                                                          <input type="checkbox" class="custom-control-input" id="customSwitch2_" checked="" (change)="SerchTypeChange($event.target.checked)">
                                                                          <label class="custom-control-label" for="customSwitch2_"> 
                                                                              Like</label>
                                                                      </div>
                                                          
                              
                                                                   <div class="row  col-md-12">
                              
                                                                          <div class="alert alert-info alert-with-border alert-dismissible" role="alert">
                                                                                  <i class="ti-alert m-r-10"></i>If Like Off Search with  '='
                                                                              </div>
                                                                   </div>
                                                      
                              
                                                             
                              
                              
                                                                   <div class="input-group" *ngIf="FilterType=='All'" >
                                                                      <input type="text" class="form-control" placeholder="Search ..." formControlName="SearchString" aria-label="Recipient's username" aria-describedby="button-addon2">
                                                                      <div class="input-group-append">
                                                                          <button class="btn btn-light waves-effect waves-button waves-light" type="button" id="button-addon2" (click)="GetSearchDetails()">
                                                                              <i class="fa fa-search"></i>
                                                                          </button>
                                                                      </div>
                                                                  </div>
                              
                              <div class="row col-md-12" *ngIf="FilterType=='Field' ">
                              
                              
                              <label for="searchPartNo"> Part No</label>
                              <input type="text" class="form-control" id="searchPartNo" formControlName="searchPartNo"  placeholder="Search Part No">
                              <label for="searchDescription"> Description</label>
                              <input type="text" class="form-control" id="searchDescription" formControlName="searchDescription"  placeholder="Search Description">
  
  
                              <label for="searchMake"> Make</label>
                              <input type="text" class="form-control" id="searchMake" formControlName="searchMake"  placeholder="Search Make">
                              <label for="searchHSN"> HSN</label>
                              <input type="text" class="form-control" id="searchHSN" formControlName="searchHSN"  placeholder="Search HSN">
                              
                              <div class="col-md-12 " style="float: right;padding-right:unset">
                              <button type="button" class=" btn btn-primary btn-rounded btn-uppercase waves-effect waves-button waves-light"  style="float: right;margin-top:10px " (click)="GetSearchDetails()">
                              <i class="ti-search m-r-5"></i> Search
                              </button>
                              
                              </div>
                              </div>
                              
                              
                                                  </div>
                                                      </div>
      
                                                  </div>
                                                        
                                              </div>
                                          </div>
                                          </div>
                                      </div>
                                          
                                      <div class="modal fade" id="InvoicePrintId"  role="dialog" aria-labelledby="InvoicePrintId" aria-hidden="true">
                                          <div class="modal-dialog modal-dialog-centered" role="document" style="max-width: 1000px;">
                                              <div class="modal-content" style="width: 1000px;">
                                                  <div class="modal-header d-print-none">
                                                      <h5 class="modal-title " id="InvoicePrintId">Print</h5>
                                                    
                                                      <button type="button"  id="btnCloseInvoicePrint" class="close" data-dismiss="modal" aria-label="Close">
                                                          <span aria-hidden="true">&times;</span>
                                                      </button>
                                                      
                                                     
                                                  </div>
                                                  
                              
                                                    
                                                   

                                          <div class="row" style ="padding: 15px;">
                                              <div class="col-md-12">

                                              <PurchaseInvoicePrint
                                              [InvoiceData]="InvoiceData"
                                             (PrintCloseClick)="PrintCloseClick()"
                                              ></PurchaseInvoicePrint>
                                          </div>
                                          </div>
                                          </div>
                                          </div>
                                      </div>




                                      <div class="modal fade" id="ModelPartyId"  role="dialog" aria-labelledby="ModelPartyId" aria-hidden="true">
                                          <div class="modal-dialog modal-dialog-centered" role="document" style="max-width: 700px;">
                                              <div class="modal-content" style="width: 700px;">
                                                  <div class="modal-header">
                                                      <h5 class="modal-title" id="ModelPartyId">Add Party</h5>
                                                      <p *ngIf="showError" class="invalid-data"><font color="red">{{errormsg}}</font></p>
                                                      <button type="button"  id="btnCloseAddItem" class="close" data-dismiss="modal" aria-label="Close">
                                                          <span aria-hidden="true">&times;</span>
                                                      </button>
                                                      
                                                     
                                                  </div>
                                                  
                              
                                                    
                                                   
  
                                          <div class="row" >
                                              <div class="col-md-12">
  
                                                  <SaveParty
  
                                                  [PartyType]="PartyType"
                                                  (PartySaved)="PartySaved($event)"
                                                  ></SaveParty>
                                          </div>
                                          </div>
                                          </div>
                                          </div>
                                      </div>

                                      <div class="modal fade" id="PurchaseInvoiceChargesId"  role="dialog" aria-labelledby="PurchaseInvoiceChargesId" aria-hidden="true">
                                          <div class="modal-dialog modal-dialog-centered" role="document" style="max-width: 600px;">
                                              <div class="modal-content" style="width: 600px;">
                                                 
                                                  <div class="modal-header">
                                                      <h5 class="modal-title" id="DetailsId">Add / Modify Charges</h5>
                                                      <p *ngIf="showchargesError" class="invalid-data"><font color="red">{{chargeserrormsg}}</font></p>
                                                      <button type="button"  id="btnClosePurchaseInvoiceCharges" class="close" data-dismiss="modal" aria-label="Close">
                                                          <span aria-hidden="true">&times;</span>
                                                      </button>
                                                     
                                                     
                                                  </div>
                              
                                                  <div class="modal-body">
                                                  <b> <label  style="float: right;" >SNO:{{SNOCh}}</label></b>
                                                   
                                                   
                              
                                          <div class="row" >
                                              <div class="col-md-12">
                                                  <div class="row">
                              
                                              <div class="col-md-6">
                                                  <label > Charges</label>
                                                  <DropdownAccounts (AccountValueChange) ="AccountValueChange($event)"  [AccountGroup] ="ChargesAccountGroup"    [COAId]="DisplayCgargesCOAId" [AccountName]="DispalyChargesAccountName"></DropdownAccounts>
                                              </div> 
                                              <div class="mb-3"></div>
                                              <div class="col-md-6">
                                                  <label for="ChargesAmount">Amount</label>
                                                  <input type="number" class="mb-3 form-control" id="ChargesAmount" formControlName="ChargesAmount" (change)="SelectedChargesCalc()" placeholder="Charges Amount">
                                              </div> 
                                              <div class="col-md-6" *ngIf="TaxType!='Inter State'">
                                                  <label for="ChargesAmount">CGST%</label>
                                                  <input type="number" class="mb-3 form-control" id="ChargesCGSTPer" formControlName="ChargesCGSTPer"  readonly>
                                              </div> 
                                              <div class="col-md-6" *ngIf="TaxType!='Inter State'">
                                                  <label for="ChargesAmount">CGST Amount</label>
                                                  <input type="number" class="mb-3 form-control" id="ChargesCGSTAmount" formControlName="ChargesCGSTAmount"  readonly>
                                              </div> 
                                              <div class="col-md-6" *ngIf="TaxType!='Inter State'">
                                                  <label for="ChargesAmount">SGST%</label>
                                                  <input type="number" class="mb-3 form-control" id="ChargesSGSTPer" formControlName="ChargesSGSTPer" readonly>
                                              </div> 
                                              <div class="col-md-6" *ngIf="TaxType!='Inter State'">
                                                  <label for="ChargesAmount">SGST Amount</label>
                                                  <input type="number" class="mb-3 form-control" id="ChargesSGSTAmount" formControlName="ChargesSGSTAmount"  readonly>
                                              </div> 
                                              <div class="col-md-6" *ngIf="TaxType=='Inter State'">
                                                  <label for="ChargesAmount">IGST%</label>
                                                  <input type="number" class="mb-3 form-control" id="ChargesIGSTPer" formControlName="ChargesIGSTPer"  readonly>
                                              </div> 
                                              <div class="col-md-6"  *ngIf="TaxType=='Inter State'">
                                                  <label for="ChargesAmount">IGST Amount</label>
                                                  <input type="number" class="mb-3 form-control" id="ChargesIGSTAmount" formControlName="ChargesIGSTAmount"  readonly>
                                              </div> 
                                              <div class="col-md-6">
                                              </div> 
                                              <div class="col-md-6">
                                                  <label for="ChargesAmount">Total Amount</label>
                                                  <input type="number" class="mb-3 form-control" id="TotalCharges" formControlName="TotalCharges"  readonly>
                                             
                                              </div> 
                                              <div class="col-md-12">
                                             
                                                  <label for="ChargesNarration">Notes</label>
                                                  <textarea  class="form-control" rows="5" cols="5" id="ChargesNarration" formControlName="ChargesNarration">
                                                  </textarea>
                                              </div>
                                                  <div class="col-md-12">
                                                      <br>
                                                      <div class="col-md-12 text-right card-body"  >
                                             
                                                                                                   
                                                       
                                                     
                                                          <button type="button" class="btn btn-danger modal-btn waves-effect waves-button waves-light" (click)="RemoveCharges()"  style="margin-right:5px" data-dismiss="modal">
                                                              <i class="ti-trash m-r-5 modal-btn-icon"></i> Remove
                                                          </button>
                                                          <button type="button" class="btn btn-primary modal-btn waves-effect waves-button waves-light" (click)="AddCharges('Close')" style="margin-right:5px">
                                                              <i class="ti-check m-r-5 modal-btn-icon"></i> Add
                                                          </button>
                                                          <button type="button" class="btn btn-primary modal-btn waves-effect waves-button waves-light" (click)="AddCharges('')" style="margin-right:5px">
                                                              <i class="ti-check m-r-5 modal-btn-icon"></i> Add +
                                                          </button>
                                                     
                                                     
                                                      </div>
                                             
                                              </div>
                                              </div>
                                          </div>
                                          </div>
                                          </div>
                                      </div>
                                      </div>
                                 
                                 
                                 
                                  </div>
                              
                                  <div class="modal fade" id="NewCharges"  role="dialog" aria-labelledby="NewCharges" aria-hidden="true">
                                      <div class="modal-dialog modal-dialog-centered" role="document" style="max-width: 1500px;">
                                          <div class="modal-content" style="width: 1500px;">
                                              <div class="modal-header">
                                                  <h5 class="modal-title" id="NewCharges">Add / Modify Charges</h5>
                                                  <p *ngIf="showError" class="invalid-data"><font color="red">{{errormsg}}</font></p>
                                                  <button type="button"   style="display: none;"  id="btnCloseAddItem1" class="close" data-dismiss="modal" aria-label="Close">
                                                      <span aria-hidden="true">&times;</span>
                                                  </button>
                                              </div>
                                              
                                      <div class="row" style ="padding: 15px;">
                                          <div class="col-md-12">
                                              <app-add-charges-account
                                              [SelectedRow1]="SelectedProductData2"
                                              [TransactionDate]="TransactionDate"
                                              
                                              (AddchargesItemAndCloseClick)="AddchargesItemAndCloseClick($event)"
                                              
                                              >
                                                  
                                              </app-add-charges-account>
                                              </div>
                                              </div>

                                          </div>
                                      </div>
                                  </div>

                                  <div  aria-labelledby="ReferenceDoc" class="modal fade show" id="ReferenceDoc" role="dialog"  aria-modal="true">
                                      <div  class="modal-dialog modal-dialog-centered" role="document" style="max-width: 500px;">
                                          <div  class="modal-content" >
                                              <div  class="modal-header">
                                                  <h5  class="modal-title" id="ReferenceDoc">Upload Reference Documents</h5>
                                             
                                                  <button  aria-label="Close" class="close" data-dismiss="modal" id="btnCloseAddItem11"  type="button" autocomplete="off"><span  aria-hidden="true">×</span></button>
                                              </div>
                                              <div class="modal-body">
                                                  <div class="row">
                                                      <div class="col-md-12">
                                                          <img  id="Image"    alt=""  width="100%" height="300px">
                                                          <input type="file" nclass="form-control-file"
                                                          id="fileOpenModelImage"
                                                          (change)="ImagefileChange($event,'Image')" accept="image/*"
                                                          
                                                          >
                                                      </div>
                                                  </div>
                                              </div>
                                              <div class="modal-footer">
                                                  <div class="container">     
                                                      <div class="row">
                                                          <div class="col-md-12">
                                                              <!-- <button class="btn btn-warning float-right" (click)="Upload()" style="margin-left: 8px;">Upload</button> -->

                                                              <button class="btn btn-danger float-right" (click)="Removeimg()" >Remove</button>


                                                          </div>
                                                      </div>
                                                  </div>
                                              </div>
                                          
                                          </div>
                                      </div>
                                  </div>
                                  <div class="modal fade" id="addNote" tabindex="-1" role="dialog" aria-labelledby="addNoteLabel" aria-hidden="true">
                                    <div class="modal-dialog" role="document">
                                    <div class="modal-content">
                                    <div class="modal-header">
                                    <h5 class="modal-title" id="addNoteLabel">Add Note</h5>
                                    <button type="button" class="close" id="addnoteclose" data-dismiss="modal" aria-label="Close">
                                      <span aria-hidden="true">&times;</span>
                                    </button>
                                    </div>
                                    <div class="modal-body">
                                    <div class="container">
                                        <div class="row">
                                            <div class="col-md-12">
                                                <h3>Part No : <strong>{{tempNotepartno}}</strong></h3>
                                            </div>
                                            <div class="col-md-12">
                                                <label for="">Note</label>
                                                <textarea name="" id="noteid" cols="30" rows="2" class="form-control" formControlName="ItemNote"></textarea>
                                           <label *ngIf="addnotevalid" style="color: red;">Note is required</label>
                                              </div>
                                        </div>
                                    </div>
                                    </div>
                                    <div class="modal-footer">
                                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                                    <button type="button" class="btn btn-warning" (click)="saveNote()">Save</button>
                                    </div>
                                    </div>
                                    </div>
                                    </div>

                              </form>
                              </main>

                             
                             